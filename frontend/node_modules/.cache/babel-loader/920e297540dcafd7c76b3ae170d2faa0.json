{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Button,makeStyles,TextareaAutosize,Typography}from\"@material-ui/core\";import{grey}from\"@material-ui/core/colors\";import{Delete,ThumbUp,ThumbUpOutlined}from\"@material-ui/icons\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{format}from'timeago.js';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{};});function Comment(_ref){var fetchComment=_ref.fetchComment,openComment=_ref.openComment,c=_ref.c;var classes=useStyles();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),commentUser=_useState2[0],setCommentUser=_useState2[1];var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var _useState3=useState(c===null||c===void 0?void 0:c.likes.length),_useState4=_slicedToArray(_useState3,2),commentLike=_useState4[0],setCommentLike=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLiked=_useState6[0],setIsLiked=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),owner=_useState8[0],setOwner=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),refresh=_useState10[0],setRefresh=_useState10[1];useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/api/user/',{userId:c.userId});case 2:res=_context.sent;setCommentUser(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser();},[refresh]);useEffect(function(){setOwner(user._id===c.userId);});useEffect(function(){setIsLiked(c===null||c===void 0?void 0:c.likes.includes(user._id));},[user._id,c===null||c===void 0?void 0:c.likes,refresh]);var commentLikeHandler=function commentLikeHandler(){try{axios.put('/api/post/comment/'+c._id+'/like',{userId:user._id});}catch(error){}setCommentLike(isLiked?commentLike-1:commentLike+1);setIsLiked(!isLiked);};var commentDeleteHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete('/api/post/comment/'+c._id);case 3:// openComment(true)\n// setRefresh(!refresh)\nfetchComment();_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function commentDeleteHandler(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:c.comment&&/*#__PURE__*/_jsxs(\"div\",{style:openComment?{margin:'10px',display:'flex',backgroundColor:'',width:'95%',position:'relative',zIndex:'6'}:{display:'none'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{width:\"30\",height:\"30\",style:{borderRadius:'50%',marginTop:'3px'},src:commentUser.profilePicture,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'0 8px',padding:'8px',backgroundColor:grey[100],width:'100%',Minheight:'30px',borderRadius:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{style:{fontSize:'14px',marginRight:'8px'},variant:\"h6\",component:\"span\",children:commentUser.username}),/*#__PURE__*/_jsx(Typography,{style:{fontSize:'12px'},variant:\"p\",component:\"span\",children:format(c.createdAt)})]}),/*#__PURE__*/_jsx(\"p\",{children:c.comment})]}),owner&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',right:20,top:0},children:/*#__PURE__*/_jsx(Delete,{onClick:commentDeleteHandler,style:{color:'grey',width:'15px'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',right:20,bottom:-9,display:'flex'},children:[/*#__PURE__*/_jsx(ThumbUp,{onClick:commentLikeHandler,style:isLiked?{width:'15px',color:'#0D8E8E',marginRight:'3px'}:{width:'15px',color:'gray',marginRight:'3px'}}),/*#__PURE__*/_jsx(Typography,{style:{marginTop:'4px',fontSize:'14px'},variant:\"p\",children:commentLike})]})]})});}export default Comment;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/home/feed/Comment.jsx"],"names":["Button","makeStyles","TextareaAutosize","Typography","grey","Delete","ThumbUp","ThumbUpOutlined","axios","useEffect","useState","useSelector","format","moment","useStyles","theme","Comment","fetchComment","openComment","c","classes","commentUser","setCommentUser","userDetails","state","loading","error","user","likes","length","commentLike","setCommentLike","isLiked","setIsLiked","owner","setOwner","refresh","setRefresh","fetchUser","post","userId","res","data","_id","includes","commentLikeHandler","put","commentDeleteHandler","delete","comment","margin","display","backgroundColor","width","position","zIndex","borderRadius","marginTop","profilePicture","padding","Minheight","fontSize","marginRight","username","createdAt","right","top","color","bottom"],"mappings":"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","sourcesContent":["import {Button, makeStyles, TextareaAutosize, Typography} from \"@material-ui/core\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport { Delete, ThumbUp, ThumbUpOutlined } from \"@material-ui/icons\"\r\nimport axios from \"axios\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport {format} from 'timeago.js'\r\nimport moment from 'moment'\r\n\r\nconst useStyles = makeStyles((theme) => ({}))\r\n\r\nfunction Comment({fetchComment, openComment,c}) {\r\n    const classes = useStyles()\r\n    const[commentUser, setCommentUser] = useState('')\r\n    const userDetails = useSelector( state => state.userDetails)\r\n    const{ loading, error, user} = userDetails\r\n    const[commentLike, setCommentLike] = useState(c?.likes.length)\r\n    const[isLiked, setIsLiked] = useState(false)\r\n    const[owner, setOwner] = useState(false)\r\n    const[refresh, setRefresh] = useState(false)\r\n    useEffect(()=>{\r\n        const fetchUser = async()=>{\r\n            const res = await axios.post('/api/user/',{userId:c.userId})\r\n            setCommentUser(res.data)\r\n\r\n        }\r\n        fetchUser()\r\n    },[refresh])\r\n\r\n    useEffect(()=>{\r\n        setOwner(user._id===c.userId)\r\n    })\r\n \r\n    useEffect(()=>{\r\n        setIsLiked(c?.likes.includes(user._id))\r\n    },[user._id,c?.likes,refresh])\r\n    const commentLikeHandler = ()=>{\r\n        try {\r\n        axios.put('/api/post/comment/'+c._id+'/like',{userId:user._id})\r\n        } catch (error) {  }\r\n        setCommentLike(isLiked ? commentLike-1 : commentLike+1)\r\n        setIsLiked(!isLiked)\r\n    }\r\n    const commentDeleteHandler = async()=>{\r\n        try {\r\n             await axios.delete('/api/post/comment/'+c._id)\r\n            \r\n                // openComment(true)\r\n                // setRefresh(!refresh)\r\n                fetchComment()\r\n                \r\n               \r\n            \r\n            \r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\n  return (\r\n   <>\r\n  {c.comment && <div style={ openComment? {margin:'10px', display:'flex', backgroundColor:'', width:'95%', position:'relative',zIndex:'6' }:{display:'none'}}>\r\n                <div>\r\n                <img width='30' height='30' style={{borderRadius:'50%',marginTop:'3px'}} src={commentUser.profilePicture} alt=\"\" />\r\n                </div>\r\n                <div style={{margin:'0 8px', padding:'8px', backgroundColor:grey[100], width:'100%', Minheight:'30px', borderRadius:'20px'}}>\r\n                    \r\n                    <div>\r\n                        <Typography style={{fontSize:'14px', marginRight:'8px'}} variant=\"h6\" component='span'>{commentUser.username}</Typography>\r\n                        <Typography style={{fontSize:'12px'}} variant=\"p\" component='span'>{format(c.createdAt)}</Typography>\r\n                        \r\n                        {/* <Typography style={{fontSize:'12px'}} variant=\"p\" component='span'>{moment(commentUser.createdAt).startOf('hour').fromNow()}</Typography> */}\r\n\r\n                    </div>\r\n                    <p>{c.comment}</p>\r\n                </div>\r\n               { owner && <div style={{position:'absolute',right:20, top:0}}>\r\n                <Delete onClick={commentDeleteHandler} style={{color:'grey',width:'15px'}}/>\r\n                </div> }\r\n                <div style={{position:'absolute',right:20, bottom:-9,display:'flex'}}>\r\n                <ThumbUp onClick={commentLikeHandler} style={isLiked?{width:'15px', color:'#0D8E8E',marginRight:'3px'}:{width:'15px',color:'gray',marginRight:'3px'}}/>\r\n                <Typography style={{marginTop:'4px',fontSize:'14px'}} variant=\"p\">{commentLike}</Typography>\r\n                </div>\r\n    </div> }\r\n   </>\r\n  )\r\n}\r\n\r\nexport default Comment"]},"metadata":{},"sourceType":"module"}