{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Button,Card,CardContent,CardMedia,Dialog,DialogActions,DialogContent,DialogTitle,makeStyles,Typography}from\"@material-ui/core\";import{useNavigate,useParams}from\"react-router\";import moment from'moment';import{grey}from\"@material-ui/core/colors\";import axios from\"axios\";import{useSelector}from\"react-redux\";import{useEffect,useState}from\"react\";import{Delete,StarOutlined,StarOutlineOutlined}from\"@material-ui/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{card:{margin:theme.spacing(1),width:'31%',position:'relative'},main:{marginTop:theme.spacing(15),margin:theme.spacing(10)},mainDiv:{backgroundColor:grey[50],display:'flex',justifyContent:'start',flexWrap:'wrap'},cardContent:{display:'flex',justifyContent:'center',alignItems:'center'},mainText:{fontSize:'18px'},datetext:{fontWeight:600},addresstext:{fontWeight:500,color:'#696969'},interesttext:{color:'grey'},followButton:{marginTop:theme.spacing(1),backgroundColor:'#0D8E8E',color:'white'},kmtext:{fontWeight:600,color:'#0D8E8E'},starLogo:{color:'yellow'}};});function EventListCard(_ref){var refresh=_ref.refresh,setRefresh=_ref.setRefresh,f=_ref.f,long=_ref.long,latt=_ref.latt;var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var classes=useStyles();var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),liked=_useState2[0],setLiked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),owner=_useState4[0],setOwner=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),confirm=_useState6[0],setConfirm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),interested=_useState8[0],setInterseted=_useState8[1];useEffect(function(){setOwner(user._id===f.ownerId);});useEffect(function(){var like=f.interested.includes(user._id);setInterseted(like);setLiked(like);});function distance(lat1,lat2,lon1,lon2){// The math module contains a function\n// named toRadians which converts from\n// degrees to radians.\nlon1=lon1*Math.PI/180;lon2=lon2*Math.PI/180;lat1=lat1*Math.PI/180;lat2=lat2*Math.PI/180;// Haversine formula\nvar dlon=lon2-lon1;var dlat=lat2-lat1;var a=Math.pow(Math.sin(dlat/2),2)+Math.cos(lat1)*Math.cos(lat2)*Math.pow(Math.sin(dlon/2),2);var c=2*Math.asin(Math.sqrt(a));// Radius of earth in kilometers. Use 3956\n// for miles\nvar r=6371;// calculate the result\nreturn c*r;}var interestedHandler=function interestedHandler(){try{axios.put('/api/event/'+f._id+'/interest',{userId:user===null||user===void 0?void 0:user._id});setRefresh(!refresh);}catch(error){}setLiked(!liked);};var km=distance(f.loc.coordinates[0],latt,f.loc.coordinates[1],long).toFixed(1);var deleteConfirm=function deleteConfirm(){setConfirm(true);};var deleteEvent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(eventId){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.delete('/api/event/'+eventId);case 3:res=_context.sent;if(res.data){setRefresh(true);setConfirm(false);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 10:setInterseted(!interested);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function deleteEvent(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{className:classes.card,children:[owner?/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:150,right:10,zIndex:4},children:/*#__PURE__*/_jsx(Delete,{onClick:deleteConfirm,style:{color:'grey'}})}):'',/*#__PURE__*/_jsx(CardMedia,{className:classes.cardImage,component:\"img\",height:\"140\",image:f.img}),/*#__PURE__*/_jsxs(CardContent,{className:classes.CardContent,children:[/*#__PURE__*/_jsx(Typography,{className:classes.datetext,variant:\"p\",component:\"div\",children:moment(f.date).add('days').calendar()}),/*#__PURE__*/_jsxs(Typography,{className:classes.kmtext,variant:\"p\",component:\"div\",children:[km,\"km\"]}),/*#__PURE__*/_jsx(Typography,{className:classes.mainText,variant:\"h5\",component:\"div\",children:f.eventName}),/*#__PURE__*/_jsx(Typography,{className:classes.addresstext,variant:\"p\",component:\"div\",children:f.address}),/*#__PURE__*/_jsxs(Typography,{className:classes.interesttext,variant:\"p\",component:\"div\",children:[f.interested.length,\" interested\"]}),interested?/*#__PURE__*/_jsxs(Button,{onClick:interestedHandler,className:classes.followButton,variant:\"contained\",children:[\" \",/*#__PURE__*/_jsx(StarOutlined,{className:classes.starLogo}),\" Interested\"]}):/*#__PURE__*/_jsxs(Button,{onClick:interestedHandler,variant:\"contained\",children:[\" \",/*#__PURE__*/_jsx(StarOutlined,{style:{color:'white'}}),\" interested\"]})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:confirm,onClose:function onClose(){return setConfirm(false);},children:[/*#__PURE__*/_jsx(DialogTitle,{style:{fontWeight:700},children:\"Delete?\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(DialogContent,{children:\"Items that you delete can't be restored.\"}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteEvent(f._id);},variant:\"contained\",style:{color:'white',backgroundColor:'#0D8E8E'},children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return setConfirm(false);},style:{color:'#0D8E8E',backgroundColor:'white'},children:\"Cancel\"})]})]})]});}export default EventListCard;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/events/EventListCard.jsx"],"names":["Button","Card","CardContent","CardMedia","Dialog","DialogActions","DialogContent","DialogTitle","makeStyles","Typography","useNavigate","useParams","moment","grey","axios","useSelector","useEffect","useState","Delete","StarOutlined","StarOutlineOutlined","useStyles","theme","card","margin","spacing","width","position","main","marginTop","mainDiv","backgroundColor","display","justifyContent","flexWrap","cardContent","alignItems","mainText","fontSize","datetext","fontWeight","addresstext","color","interesttext","followButton","kmtext","starLogo","EventListCard","refresh","setRefresh","f","long","latt","userDetails","state","loading","error","user","classes","navigate","liked","setLiked","owner","setOwner","confirm","setConfirm","interested","setInterseted","_id","ownerId","like","includes","distance","lat1","lat2","lon1","lon2","Math","PI","dlon","dlat","a","pow","sin","cos","c","asin","sqrt","r","interestedHandler","put","userId","km","loc","coordinates","toFixed","deleteConfirm","deleteEvent","eventId","delete","res","data","alert","top","right","zIndex","cardImage","img","date","add","calendar","eventName","address","length"],"mappings":"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","sourcesContent":["import {Button, Card, CardContent, CardMedia, Dialog, DialogActions, DialogContent, DialogTitle, makeStyles, Typography} from \"@material-ui/core\"\r\nimport { useNavigate, useParams } from \"react-router\"\r\nimport moment from 'moment'\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport axios from \"axios\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { Delete, StarOutlined, StarOutlineOutlined } from \"@material-ui/icons\"\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    card:{\r\n        margin:theme.spacing(1),\r\n        width:'31%',\r\n        position:'relative'\r\n        \r\n    },\r\n    main:{\r\n        marginTop: theme.spacing(15),\r\n        margin: theme.spacing(10)\r\n    },\r\n    mainDiv:{\r\n        backgroundColor:grey[50],\r\n        display:'flex',\r\n        justifyContent:'start',\r\n        flexWrap:'wrap'\r\n    },\r\n    cardContent:{\r\n        display:'flex',\r\n        justifyContent:'center',\r\n        alignItems:'center'\r\n    \r\n    },\r\n    mainText:{\r\n        fontSize:'18px'\r\n    },\r\n    datetext:{\r\n      fontWeight:600\r\n    },\r\n    addresstext:{\r\n      fontWeight:500,\r\n      color:'#696969',\r\n\r\n    },\r\n    interesttext:{\r\n      color:'grey'\r\n    },\r\n    followButton:{\r\n        marginTop:theme.spacing(1),\r\n        backgroundColor:'#0D8E8E',\r\n        color:'white'\r\n    },\r\n    kmtext:{\r\n        fontWeight:600,\r\n        color:'#0D8E8E'\r\n        \r\n    },\r\n    starLogo:{\r\n     color:'yellow'\r\n    }\r\n}))\r\n\r\nfunction EventListCard({refresh,setRefresh, f,long,latt}) {\r\n    const userDetails = useSelector( state => state.userDetails)\r\n    const{loading,error, user} = userDetails\r\n    const classes = useStyles()\r\n    const navigate = useNavigate()\r\n    const[liked, setLiked] = useState()\r\n    const[owner,setOwner] = useState(false)\r\n    const[confirm, setConfirm] = useState(false)\r\n    const[interested, setInterseted] = useState(false)\r\n\r\n    useEffect(()=>{\r\n      setOwner(user._id===f.ownerId)\r\n    })\r\nuseEffect(()=>{\r\n  const like = f.interested.includes(user._id)\r\n  setInterseted(like)\r\n  setLiked(like)\r\n})\r\n    function distance(lat1,\r\n        lat2, lon1, lon2)\r\n  {\r\n  \r\n  // The math module contains a function\r\n  // named toRadians which converts from\r\n  // degrees to radians.\r\n  lon1 =  lon1 * Math.PI / 180;\r\n  lon2 = lon2 * Math.PI / 180;\r\n  lat1 = lat1 * Math.PI / 180;\r\n  lat2 = lat2 * Math.PI / 180;\r\n  \r\n  // Haversine formula\r\n  let dlon = lon2 - lon1;\r\n  let dlat = lat2 - lat1;\r\n  let a = Math.pow(Math.sin(dlat / 2), 2)\r\n    + Math.cos(lat1) * Math.cos(lat2)\r\n    * Math.pow(Math.sin(dlon / 2),2);\r\n  \r\n  let c = 2 * Math.asin(Math.sqrt(a));\r\n  \r\n  // Radius of earth in kilometers. Use 3956\r\n  // for miles\r\n  let r = 6371;\r\n  \r\n  // calculate the result\r\n  return(c * r);\r\n  }\r\n  const interestedHandler = ()=>{\r\n      try {\r\n          axios.put('/api/event/'+f._id+'/interest',{userId:user?._id})\r\n          \r\n          setRefresh(!refresh)\r\n      } catch (error) {\r\n          \r\n      }\r\n      setLiked(!liked)\r\n  }\r\n  \r\n  const km = distance(f.loc.coordinates[0],latt, f.loc.coordinates[1],long).toFixed(1)\r\n  \r\n  const deleteConfirm = ()=>{\r\n    setConfirm(true)\r\n  }\r\n\r\n  const deleteEvent= async(eventId)=>{\r\n    try {\r\n      const res = await axios.delete('/api/event/'+eventId)\r\n      if(res.data)\r\n      {\r\n          setRefresh(true)\r\n          setConfirm(false)\r\n      }\r\n  } catch (error) {\r\n    alert(error)\r\n\r\n      \r\n  }\r\n  setInterseted(!interested)\r\n\r\n  }\r\n\r\n  return (\r\n    <>\r\n        <Card className={classes.card}>\r\n          {owner?<div style={{position:'absolute',top:150,right:10,zIndex:4}}>\r\n            <Delete onClick={deleteConfirm} style={{color:'grey'}}/>\r\n          </div>:''}\r\n          \r\n          <CardMedia\r\n          className={classes.cardImage}\r\n          component='img'\r\n          height='140'\r\n          image={f.img}\r\n\r\n          />\r\n          <CardContent className={classes.CardContent}>\r\n          <Typography className={classes.datetext} variant=\"p\" component='div'>{moment(f.date).add('days').calendar()}</Typography>\r\n          <Typography className={classes.kmtext} variant=\"p\" component='div'>{km}km</Typography>\r\n          <Typography className={classes.mainText} variant=\"h5\" component=\"div\">{f.eventName}</Typography>\r\n          <Typography className={classes.addresstext} variant=\"p\" component='div'>{f.address}</Typography>\r\n            <Typography className={classes.interesttext} variant=\"p\" component='div'>{f.interested.length} interested</Typography>\r\n            {interested?\r\n            <Button onClick={interestedHandler} className={classes.followButton} variant=\"contained\"> <StarOutlined className={classes.starLogo}/> Interested</Button>\r\n            : <Button onClick={interestedHandler} variant=\"contained\"> <StarOutlined style={{color:'white'}}/> interested</Button> }\r\n          </CardContent>\r\n        </Card>\r\n\r\n\r\n        {/* confim modal */}\r\n        <Dialog open={confirm} onClose={()=>setConfirm(false)}>\r\n        <DialogTitle style={{fontWeight:700}}>\r\n            Delete?\r\n        </DialogTitle>\r\n        <hr/>\r\n        <DialogContent>\r\n        Items that you delete can't be restored.\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button onClick={()=>deleteEvent(f._id)} variant=\"contained\" style={{color:'white', backgroundColor:'#0D8E8E'}}>Delete</Button>\r\n            <Button variant=\"contained\" onClick={()=>setConfirm(false)} style={{color:'#0D8E8E', backgroundColor:'white'}}>Cancel</Button>\r\n        </DialogActions>\r\n\r\n    </Dialog>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EventListCard"]},"metadata":{},"sourceType":"module"}