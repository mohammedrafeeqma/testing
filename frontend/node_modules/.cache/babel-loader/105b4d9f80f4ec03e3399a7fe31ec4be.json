{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\src\\\\components\\\\home\\\\feed\\\\Post.jsx\",\n    _s = $RefreshSig$();\n\nimport { Avatar, Button, Card, CardActions, CardContent, CardHeader, CardMedia, DialogActions, DialogContent, DialogTitle, IconButton, List, ListItem, ListItemIcon, ListItemText, makeStyles, Snackbar, TextareaAutosize, Typography } from \"@material-ui/core\";\nimport { red } from \"@material-ui/core/colors\";\nimport { Delete, DeleteOutlined, Favorite, FavoriteBorderOutlined, MoreVert, Report, ThumbUp } from \"@material-ui/icons\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { format } from 'timeago.js';\nimport { Alert, Dialog, ListItemButton } from \"@mui/material\";\nimport { useNavigate } from \"react-router\";\nimport Comment from \"./Comment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  container: {\n    paddingTop: theme.spacing(10),\n    backgroundColor: \"white\"\n  },\n  card: {\n    marginBottom: theme.spacing(3),\n    marginLeft: theme.spacing(1),\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(15),\n      marginRight: theme.spacing(15)\n    }\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%',\n    marginLeft: theme.spacing(2),\n    marginRight: theme.spacing(2)\n  },\n  expand: {\n    marginLeft: \"auto\"\n  },\n  avatar: {\n    backgroundColor: red[500],\n    \"&:hover\": {\n      cursor: 'pointer'\n    }\n  },\n  likeColor: {\n    color: \"primary\",\n    backgroundColor: red\n  },\n  cardContent: {\n    position: 'relative'\n  },\n  option: {\n    padding: 0,\n    margin: 0,\n    position: 'absolute',\n    top: -25,\n    right: 20,\n    backgroundColor: 'white',\n    border: '1px solid black',\n    zIndex: '1'\n  },\n  avatarImg: {\n    objectFit: 'fill',\n    width: '40px',\n    height: '40px'\n  }\n}));\n\nfunction Post(_ref) {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  const classes = useStyles();\n  const [userFriend, setUserFriend] = useState();\n  const [like, setLike] = useState(post === null || post === void 0 ? void 0 : post.likes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [postOption, setPostOption] = useState(false);\n  const [refresh, setRefresh] = useState(false);\n  const [confirm, setConfirm] = useState(false);\n  const [alertBar, setAlertBar] = useState(false);\n  const [openComment, setOpenComment] = useState(false);\n  const [message, setMessage] = useState('');\n  const [comment, setComment] = useState([]);\n  const [commentMsg, setCommentMsg] = useState('');\n  const [readMore, setReadMore] = useState('');\n  const userDetails = useSelector(state => state.userDetails);\n  const {\n    loading,\n    error,\n    user\n  } = userDetails;\n  let userPost = (user === null || user === void 0 ? void 0 : user.username) === (userFriend === null || userFriend === void 0 ? void 0 : userFriend.username);\n  const navigate = useNavigate();\n  const isFavourite = user.favourite.includes(post._id);\n  useEffect(() => {\n    setIsLiked(post === null || post === void 0 ? void 0 : post.likes.includes(user._id));\n  }, [user._id, post === null || post === void 0 ? void 0 : post.likes, refresh]);\n  useEffect(() => {\n    const fetchUser = async () => {\n      const res = await axios.get(`/api/user?userId=${post.userId}`);\n      setUserFriend(res.data);\n    };\n\n    fetchUser();\n  }, [post === null || post === void 0 ? void 0 : post.userId, post, refresh]);\n\n  const fetchComment = async p => {\n    setOpenComment(!openComment);\n    const res = await axios.get('/api/post/comment/' + p);\n    setComment(res.data);\n  };\n\n  const likeHandler = async () => {\n    try {\n      const res = await axios.put('/api/post/' + post._id + '/like', {\n        userId: user._id\n      });\n\n      if (res.data == \"The post has been Liked\" && user._id != post.userId) {\n        await axios.post('/api/notification/', {\n          userId: userFriend._id,\n          friendName: user.username,\n          img: post.img,\n          postId: post._id,\n          action: 'Liked your post'\n        });\n      }\n    } catch (err) {}\n\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n  };\n\n  const reportHandle = async () => {\n    try {\n      const res = await axios.put('/api/post/' + post._id + '/report', {\n        userId: user._id\n      });\n      setMessage(res.data);\n      setPostOption(false);\n      setAlertBar(true);\n    } catch (error) {}\n  };\n\n  const addToFavourite = async () => {\n    try {\n      const res = await axios.put('/api/post/' + post._id + '/favourite', {\n        userId: user._id\n      });\n\n      if (res) {\n        setMessage(res.data);\n        setPostOption(false);\n        setAlertBar(true);\n      }\n    } catch (error) {}\n  };\n\n  const deleteHandle = async () => {\n    setConfirm(true);\n  };\n\n  const deletePost = async () => {\n    const res = await axios.delete('/api/post/' + post._id, {\n      userId: user === null || user === void 0 ? void 0 : user._id\n    });\n    window.location.reload();\n    setRefresh(!refresh);\n  };\n\n  const cancelDelete = () => {\n    setConfirm(false);\n    setPostOption(false);\n  };\n\n  const commentHandle = async () => {\n    try {\n      const res = await axios.post('/api/post/comment/', {\n        userId: user === null || user === void 0 ? void 0 : user._id,\n        postId: post._id,\n        comment: commentMsg\n      });\n\n      if (res.data) {\n        setCommentMsg('');\n        fetchComment(post._id);\n        setOpenComment(true);\n      }\n    } catch (error) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n      open: alertBar,\n      onClose: () => setAlertBar(false),\n      autoHideDuration: 2000,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setAlertBar(false),\n        severity: \"success\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }, this), post ? /*#__PURE__*/_jsxDEV(Card, {\n      className: classes.card,\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          onClick: () => {\n            navigate('/profile/' + userFriend.username);\n          },\n          className: classes.avatar,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.avatarImg,\n            src: userFriend !== null && userFriend !== void 0 && userFriend.profilePicture ? userFriend.profilePicture : 'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this),\n        action: /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"settings\",\n          onClick: () => {\n            setPostOption(!postOption);\n          },\n          children: /*#__PURE__*/_jsxDEV(MoreVert, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this),\n        title: userFriend ? userFriend.username : '',\n        subheader: format(post.createdAt)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        className: classes.cardContent,\n        children: [postOption && /*#__PURE__*/_jsxDEV(List, {\n          sx: {\n            width: '100%',\n            maxWidth: 360\n          },\n          className: classes.option,\n          children: [userPost && /*#__PURE__*/_jsxDEV(ListItem, {\n            disablePadding: true,\n            children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n              onClick: deleteHandle,\n              children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            onClick: reportHandle,\n            disablePadding: true,\n            children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n              children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                children: /*#__PURE__*/_jsxDEV(Report, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: \"Report\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 25\n          }, this), post.img && /*#__PURE__*/_jsxDEV(ListItem, {\n            disablePadding: true,\n            children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n              onClick: addToFavourite,\n              children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                children: /*#__PURE__*/_jsxDEV(Favorite, {\n                  color: isFavourite ? 'secondary' : 'amber'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: \"Favourite\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: post.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), post.img ? /*#__PURE__*/_jsxDEV(CardMedia, {\n        className: classes.media,\n        image: post.img,\n        title: \"city\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this) : '', /*#__PURE__*/_jsxDEV(CardActions, {\n        disableSpacing: true,\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"like\",\n          className: classes.likeColor,\n          onClick: likeHandler,\n          children: /*#__PURE__*/_jsxDEV(ThumbUp, {\n            style: isLiked ? {\n              color: \"#2ab0b0\"\n            } : {\n              color: \"\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          children: like\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"like\",\n          className: classes.expand,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            onClick: () => fetchComment(post._id),\n            children: [comment.length ? comment.length : '', \" Comments\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), readMore ? comment.map(c => {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Comment, {\n            fetchComment: fetchComment,\n            c: c,\n            openComment: openComment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 20\n          }, this)\n        }, void 0, false);\n      }) : comment.slice(0, 3).map(c => {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Comment, {\n            fetchComment: fetchComment,\n            c: c,\n            openComment: openComment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 20\n          }, this)\n        }, void 0, false);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'end'\n        },\n        children: [comment.length > 3 && /*#__PURE__*/_jsxDEV(Typography, {\n          onClick: () => setReadMore(true),\n          style: readMore ? {\n            display: 'none'\n          } : openComment ? {\n            display: 'block',\n            marginRight: '30px',\n            marginBottom: '10px',\n            color: '#0D8E8E'\n          } : {\n            display: 'none'\n          },\n          children: \"Readmore\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 30\n        }, this), comment.length > 3 && /*#__PURE__*/_jsxDEV(Typography, {\n          onClick: () => setReadMore(false),\n          style: readMore ? {\n            display: 'block',\n            marginRight: '30px',\n            marginBottom: '10px',\n            color: '#0D8E8E'\n          } : {\n            display: 'none'\n          },\n          children: \"Readless\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: openComment ? {\n          display: 'flex',\n          justifyContent: 'space-around',\n          marginBottom: '10px'\n        } : {\n          display: 'none'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextareaAutosize, {\n          value: commentMsg,\n          onChange: e => setCommentMsg(e.target.value),\n          minRows: 2,\n          placeholder: \"Comments\",\n          style: {\n            width: '70%',\n            borderRadius: '10px',\n            paddingLeft: '8px',\n            paddingTop: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: commentHandle,\n          variant: \"contained\",\n          style: {\n            color: 'white',\n            backgroundColor: 'green',\n            height: '35px'\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: confirm,\n        onClose: () => setConfirm(false),\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          style: {\n            fontWeight: 700\n          },\n          children: \"Delete?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: \"Items that you delete can't be restored.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => deletePost(post),\n            variant: \"contained\",\n            style: {\n              color: 'white',\n              backgroundColor: '#0D8E8E'\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: () => cancelDelete(),\n            style: {\n              color: '#0D8E8E',\n              backgroundColor: 'white'\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }, this) : \"\"]\n  }, void 0, true);\n}\n\n_s(Post, \"29qg6AoRwr1NxFHTP1yZX/1slvs=\", false, function () {\n  return [useStyles, useSelector, useNavigate];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/home/feed/Post.jsx"],"names":["Avatar","Button","Card","CardActions","CardContent","CardHeader","CardMedia","DialogActions","DialogContent","DialogTitle","IconButton","List","ListItem","ListItemIcon","ListItemText","makeStyles","Snackbar","TextareaAutosize","Typography","red","Delete","DeleteOutlined","Favorite","FavoriteBorderOutlined","MoreVert","Report","ThumbUp","useEffect","useState","axios","useSelector","format","Alert","Dialog","ListItemButton","useNavigate","Comment","useStyles","theme","container","paddingTop","spacing","backgroundColor","card","marginBottom","marginLeft","breakpoints","up","marginRight","media","height","expand","avatar","cursor","likeColor","color","cardContent","position","option","padding","margin","top","right","border","zIndex","avatarImg","objectFit","width","Post","post","classes","userFriend","setUserFriend","like","setLike","likes","length","isLiked","setIsLiked","postOption","setPostOption","refresh","setRefresh","confirm","setConfirm","alertBar","setAlertBar","openComment","setOpenComment","message","setMessage","comment","setComment","commentMsg","setCommentMsg","readMore","setReadMore","userDetails","state","loading","error","user","userPost","username","navigate","isFavourite","favourite","includes","_id","fetchUser","res","get","userId","data","fetchComment","p","likeHandler","put","friendName","img","postId","action","err","reportHandle","addToFavourite","deleteHandle","deletePost","delete","window","location","reload","cancelDelete","commentHandle","profilePicture","createdAt","maxWidth","desc","map","c","slice","display","justifyContent","e","target","value","borderRadius","paddingLeft","fontWeight"],"mappings":"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","sourcesContent":["import {Avatar, Button, Card, CardActions, CardContent, CardHeader, CardMedia, DialogActions, DialogContent, DialogTitle, IconButton, List, ListItem, ListItemIcon, ListItemText, makeStyles, Snackbar, TextareaAutosize, Typography} from \"@material-ui/core\"\r\nimport { red } from \"@material-ui/core/colors\"\r\nimport { Delete, DeleteOutlined, Favorite, FavoriteBorderOutlined, MoreVert, Report, ThumbUp } from \"@material-ui/icons\"\r\nimport { useEffect, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { useSelector } from \"react-redux\"\r\nimport {format} from 'timeago.js'\r\nimport { Alert, Dialog, ListItemButton } from \"@mui/material\"\r\nimport { useNavigate } from \"react-router\"\r\nimport Comment from \"./Comment\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container:{\r\n        paddingTop: theme.spacing(10),\r\n        backgroundColor: \"white\"\r\n        \r\n    },\r\n    card:{\r\n        \r\n        marginBottom: theme.spacing(3),\r\n        marginLeft: theme.spacing(1),\r\n        [theme.breakpoints.up('sm')]:{\r\n           marginLeft: theme.spacing(15),\r\n           marginRight: theme.spacing(15)\r\n        }\r\n        \r\n    },\r\n    media:{\r\n        height: 0,\r\n    paddingTop: '56.25%',\r\n    marginLeft: theme.spacing(2),\r\n    marginRight: theme.spacing(2)\r\n    },\r\n    expand:{\r\n        marginLeft:\"auto\"\r\n    },\r\n    avatar:{\r\n        backgroundColor: red[500],\r\n        \"&:hover\":{\r\n          cursor:'pointer'\r\n        }\r\n    },\r\n    likeColor:{\r\n        color:\"primary\",\r\n        backgroundColor:red\r\n    },\r\n    cardContent:{\r\n        position:'relative'\r\n    },\r\n   option:{\r\n       padding:0,\r\n       margin:0,\r\n       position:'absolute',\r\n       top:-25,\r\n       right:20,\r\n       backgroundColor:'white',\r\n       border:'1px solid black',\r\n       zIndex:'1'\r\n\r\n    \r\n   },\r\n   avatarImg:{\r\n       objectFit:'fill',\r\n       width:'40px',\r\n       height:'40px'\r\n   }\r\n   \r\n    \r\n}))\r\n\r\nfunction Post({post}) {\r\n    \r\n    const classes = useStyles()\r\n    const[userFriend, setUserFriend] = useState()\r\n    const[like, setLike] = useState(post ?.likes.length)\r\n    const[isLiked, setIsLiked] = useState(false)\r\n    const[postOption, setPostOption] = useState(false)\r\n    const[refresh, setRefresh] = useState(false)\r\n    const[confirm, setConfirm] = useState(false)\r\n    const[alertBar, setAlertBar] = useState(false)\r\n    const[openComment, setOpenComment] = useState(false)\r\n    const[message, setMessage] = useState('')\r\n    const[comment, setComment] = useState([])\r\n    const[commentMsg, setCommentMsg] = useState('')\r\n    const[readMore, setReadMore] = useState('')\r\n    const userDetails = useSelector( state => state.userDetails)\r\n    const{ loading, error, user} = userDetails\r\n    let userPost = user?.username === userFriend?.username\r\n    const navigate = useNavigate()\r\n   const isFavourite = user.favourite.includes(post._id)\r\n\r\n    useEffect(()=>{\r\n        setIsLiked(post?.likes.includes(user._id))\r\n    },[user._id, post?.likes,refresh])\r\n\r\n    useEffect(()=>{\r\n        const fetchUser = async()=>{\r\n            const res = await axios.get(`/api/user?userId=${post.userId}`)\r\n            setUserFriend(res.data)\r\n            \r\n        }\r\n        fetchUser()\r\n    },[post?.userId,post,refresh])\r\n\r\n       const fetchComment = async(p)=>{\r\n            setOpenComment(!openComment)\r\n            const res = await axios.get('/api/post/comment/'+p)\r\n            setComment(res.data)\r\n        }\r\n        \r\n    \r\n    const likeHandler = async()=>{\r\n        try{\r\n           const res = await axios.put('/api/post/'+post._id+'/like',{userId: user._id})\r\n           if(res.data==\"The post has been Liked\" && user._id!=post.userId)\r\n           {\r\n               await axios.post('/api/notification/',{\r\n                userId:userFriend._id,\r\n                friendName:user.username,\r\n                img:post.img,\r\n                postId:post._id,\r\n                action:'Liked your post'\r\n            })\r\n           }\r\n            \r\n        }\r\n        catch(err)\r\n        {}\r\n            setLike(isLiked ? like-1: like+1);\r\n            setIsLiked(!isLiked)\r\n        \r\n    }\r\n    const reportHandle = async() => {\r\n        try {\r\n            const res = await axios.put('/api/post/'+post._id+'/report',{userId:user._id})\r\n            setMessage(res.data)\r\n            setPostOption(false)\r\n            setAlertBar(true)\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n    const addToFavourite = async()=>{\r\n\r\n        try {\r\n           const res = await axios.put('/api/post/'+post._id+'/favourite', {userId: user._id})\r\n           if(res)\r\n           {\r\n            setMessage(res.data)\r\n            setPostOption(false)\r\n            setAlertBar(true)\r\n           }\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n    const deleteHandle = async()=>{\r\n        setConfirm(true)\r\n    }\r\n    const deletePost=async()=>{\r\n         const res = await axios.delete('/api/post/'+post._id, {userId: user?._id})\r\n         window.location.reload()\r\n         setRefresh(!refresh)\r\n         \r\n    }\r\n    const cancelDelete = ()=>{\r\n        setConfirm(false)\r\n        setPostOption(false)\r\n\r\n    }\r\n\r\n    const commentHandle = async()=>{\r\n       try {\r\n           const res = await axios.post('/api/post/comment/',{userId:user?._id, postId:post._id,comment:commentMsg})\r\n           if(res.data)\r\n           {\r\n               setCommentMsg('')\r\n               fetchComment(post._id)\r\n               setOpenComment(true)\r\n           }\r\n       } catch (error) {\r\n\r\n           \r\n       }\r\n    }\r\n    \r\n  return (\r\n    <>\r\n        \r\n    <Snackbar open={alertBar} onClose={()=>setAlertBar(false)} autoHideDuration={2000}>\r\n        <Alert onClose={()=>setAlertBar(false)} severity='success'>{message}</Alert>\r\n    </Snackbar>\r\n\r\n    {post?\r\n    <Card className={classes.card}>\r\n        <CardHeader\r\n        avatar={\r\n            <Avatar onClick={()=>{navigate('/profile/'+userFriend.username)}} className={classes.avatar}>\r\n                <img className={classes.avatarImg} src={userFriend?.profilePicture? userFriend.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}/>\r\n            </Avatar>\r\n        }\r\n        action={\r\n            <IconButton aria-label=\"settings\" onClick={()=>{setPostOption(!postOption)}}>\r\n                <MoreVert />\r\n                  \r\n            </IconButton>\r\n            \r\n        }\r\n        title=  {userFriend? userFriend.username :''}\r\n        subheader={format(post.createdAt)}\r\n        >\r\n\r\n        </CardHeader>\r\n        <CardContent className={classes.cardContent}>\r\n        {postOption&&  <List sx={{ width: '100%', maxWidth: 360 }} className={classes.option}>\r\n                       {userPost&& <ListItem  disablePadding>\r\n                            <ListItemButton onClick={deleteHandle}>\r\n                                <ListItemIcon>\r\n                                    <Delete/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary='Delete'/>\r\n                            </ListItemButton>\r\n                        </ListItem>}\r\n                        <ListItem onClick={reportHandle} disablePadding>\r\n                            <ListItemButton>\r\n                                <ListItemIcon>\r\n                                    <Report/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary='Report'/>\r\n                            </ListItemButton>\r\n                        </ListItem>\r\n                        {post.img && <ListItem disablePadding>\r\n                            <ListItemButton onClick={addToFavourite}>\r\n                                <ListItemIcon>\r\n                                    <Favorite  color={isFavourite? 'secondary':'amber'}/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary='Favourite'/>\r\n                            </ListItemButton>\r\n                        </ListItem>}\r\n                </List>\r\n                \r\n                }\r\n            <CardActions>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                    {post.desc}\r\n                </Typography>\r\n            </CardActions>\r\n        </CardContent>\r\n        {post.img?\r\n        <CardMedia\r\n        className={classes.media}\r\n        image={post.img}\r\n        title = \"city\"\r\n        />\r\n        :''}\r\n        \r\n        <CardActions disableSpacing>\r\n            <IconButton aria-label=\"like\" className={classes.likeColor} onClick={likeHandler}>\r\n                <ThumbUp style={isLiked?{color:\"#2ab0b0\"}:{color:\"\"}}/>  \r\n            </IconButton>\r\n            <Typography>{like}</Typography>\r\n            <IconButton aria-label=\"like\" className={classes.expand}>\r\n                <Typography onClick={()=>fetchComment(post._id)}>{comment.length?comment.length:''} Comments</Typography>\r\n            </IconButton>\r\n        </CardActions>\r\n        {\r\n            readMore?\r\n            comment.map((c)=>{\r\n                return(\r\n                    <>\r\n                   <Comment fetchComment={fetchComment} c={c} openComment={openComment}/>\r\n\r\n                    </>\r\n                )\r\n            })\r\n            :\r\n            comment.slice(0,3).map((c)=>{\r\n                return(\r\n                    <>\r\n                   <Comment fetchComment={fetchComment} c={c} openComment={openComment}/>\r\n        \r\n                    </>\r\n                   \r\n                )\r\n            })\r\n        \r\n    \r\n        }\r\n        <div style={{display:'flex', justifyContent:'end'}}>\r\n       { comment.length>3 && <Typography onClick={()=>setReadMore(true)} style={readMore?{display:'none'} :openComment?{display:'block',marginRight:'30px',marginBottom:'10px',color:'#0D8E8E'}:{display:'none'}}>Readmore</Typography>\r\n        }\r\n\r\n        {comment.length>3 && <Typography onClick={()=>setReadMore(false)} style={readMore?{display:'block',marginRight:'30px',marginBottom:'10px',color:'#0D8E8E'}:{display:'none'}}>Readless</Typography>\r\n        }\r\n    \r\n\r\n         </div>        \r\n        <div style={openComment?{display:'flex', justifyContent:'space-around',marginBottom:'10px'}:{display:'none'}}>\r\n        <TextareaAutosize\r\n        value={commentMsg}\r\n        onChange={(e)=>setCommentMsg(e.target.value)}\r\n        minRows={2}\r\n        placeholder=\"Comments\"\r\n        style={{width:'70%', borderRadius:'10px',paddingLeft:'8px',paddingTop:'8px'}}\r\n        />\r\n\r\n        <Button onClick={commentHandle}  variant=\"contained\" style={{color:'white', backgroundColor:'green',height:'35px'}}>Send</Button>\r\n\r\n    </div>\r\n            \r\n\r\n        <Dialog open={confirm} onClose={()=>setConfirm(false)}>\r\n        <DialogTitle style={{fontWeight:700}}>\r\n            Delete?\r\n        </DialogTitle>\r\n        <hr/>\r\n        <DialogContent>\r\n        Items that you delete can't be restored.\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button onClick={()=>deletePost(post)} variant=\"contained\" style={{color:'white', backgroundColor:'#0D8E8E'}}>Delete</Button>\r\n            <Button variant=\"contained\" onClick={()=>cancelDelete()} style={{color:'#0D8E8E', backgroundColor:'white'}}>Cancel</Button>\r\n        </DialogActions>\r\n\r\n    </Dialog>\r\n\r\n    </Card>\r\n    :\"\"}\r\n\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default Post"]},"metadata":{},"sourceType":"module"}