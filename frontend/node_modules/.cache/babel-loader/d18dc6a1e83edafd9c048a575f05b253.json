{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Button,Card,CardContent,CardMedia,makeStyles,Typography}from\"@material-ui/core\";import{grey}from\"@material-ui/core/colors\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useNavigate,useParams}from\"react-router\";import EventListCard from\"./EventListCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{card:{margin:theme.spacing(1),width:\"30%\"},main:{marginTop:theme.spacing(15),margin:theme.spacing(10)},mainDiv:{backgroundColor:grey[50],display:\"flex\",justifyContent:\"start\",flexWrap:\"wrap\"},cardContent:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},mainText:{fontSize:\"18px\"},datetext:{fontWeight:600},addresstext:{fontWeight:500,color:\"#aba7a7\"},interesttext:{color:\"#575859\"},followButton:{marginTop:theme.spacing(1),backgroundColor:\"#0D8E8E\",color:\"white\"}};});function EventList(){var _useParams=useParams(),nearby=_useParams.nearby;var classes=useStyles();var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),long=_useState2[0],setLong=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),latt=_useState4[0],setLatt=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),events=_useState6[0],setEvents=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),allEvents=_useState8[0],setAllEvents=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),stage=_useState10[0],setStage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),eventStage=_useState12[0],setEventStage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),refresh=_useState14[0],setRefresh=_useState14[1];var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),yourEvent=_useState16[0],setYourEvent=_useState16[1];useEffect(function(){if(nearby===\"nearby\"){setEventStage(false);setYourEvent(false);setStage(true);}else if(nearby===\"yourevents\"){setStage(false);setEventStage(false);setYourEvent(true);}else{setStage(false);setYourEvent(false);setEventStage(true);}});function getLocation(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition);}}var showPosition=function showPosition(position){setLong(position.coords.longitude);setLatt(position.coords.latitude);};getLocation();useEffect(function(){var getEventLists=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!stage){_context.next=6;break;}_context.next=3;return axios.post(\"/api/event/nearby\",{long:long,latt:latt});case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return axios.get(\"/api/event/all\");case 8:_context.t0=_context.sent;case 9:res=_context.t0;setEvents(res.data);case 11:case\"end\":return _context.stop();}}},_callee);}));return function getEventLists(){return _ref.apply(this,arguments);};}();getEventLists();},[long,latt,stage,refresh]);return/*#__PURE__*/_jsxs(Card,{className:classes.main,children:[/*#__PURE__*/_jsx(Typography,{style:{margin:\"10px 0px 20px 15px\",fontWeight:500},variant:\"h5\",children:stage?\"Nearby Events\":yourEvent?\"Intereted Events\":\"All Events\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.mainDiv,children:events===null||events===void 0?void 0:events.map(function(f){return/*#__PURE__*/_jsx(_Fragment,{children:yourEvent?f.interested.includes('622ca39b28782d07e0b8f754')&&/*#__PURE__*/_jsx(EventListCard,{refresh:refresh,setRefresh:setRefresh,long:long,latt:latt,f:f}):/*#__PURE__*/_jsx(EventListCard,{refresh:refresh,setRefresh:setRefresh,long:long,latt:latt,f:f})});})})]});}export default EventList;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/events/EventList.jsx"],"names":["Button","Card","CardContent","CardMedia","makeStyles","Typography","grey","axios","useEffect","useState","useSelector","useNavigate","useParams","EventListCard","useStyles","theme","card","margin","spacing","width","main","marginTop","mainDiv","backgroundColor","display","justifyContent","flexWrap","cardContent","alignItems","mainText","fontSize","datetext","fontWeight","addresstext","color","interesttext","followButton","EventList","nearby","classes","navigate","long","setLong","latt","setLatt","events","setEvents","allEvents","setAllEvents","stage","setStage","eventStage","setEventStage","refresh","setRefresh","userDetails","state","loading","error","user","yourEvent","setYourEvent","getLocation","navigator","geolocation","getCurrentPosition","showPosition","position","coords","longitude","latitude","getEventLists","post","get","res","data","map","f","interested","includes"],"mappings":"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","sourcesContent":["import {\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  makeStyles,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport EventListCard from \"./EventListCard\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  card: {\r\n    margin: theme.spacing(1),\r\n    width: \"30%\",\r\n  },\r\n  main: {\r\n    marginTop: theme.spacing(15),\r\n    margin: theme.spacing(10),\r\n  },\r\n  mainDiv: {\r\n    backgroundColor: grey[50],\r\n    display: \"flex\",\r\n    justifyContent: \"start\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  cardContent: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  mainText: {\r\n    fontSize: \"18px\",\r\n  },\r\n  datetext: {\r\n    fontWeight: 600,\r\n  },\r\n  addresstext: {\r\n    fontWeight: 500,\r\n    color: \"#aba7a7\",\r\n  },\r\n  interesttext: {\r\n    color: \"#575859\",\r\n  },\r\n  followButton: {\r\n    marginTop: theme.spacing(1),\r\n    backgroundColor: \"#0D8E8E\",\r\n    color: \"white\",\r\n  },\r\n}));\r\n\r\nfunction EventList() {\r\n  let { nearby } = useParams();\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n  const [long, setLong] = useState(null);\r\n  const [latt, setLatt] = useState(null);\r\n  const [events, setEvents] = useState([]);\r\n  const [allEvents, setAllEvents] = useState([]);\r\n  const [stage, setStage] = useState(false);\r\n  const[eventStage, setEventStage] = useState(false)\r\n  const [refresh, setRefresh] = useState(false);\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { loading, error, user } = userDetails;\r\n  const [yourEvent, setYourEvent] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (nearby === \"nearby\") {\r\n      setEventStage(false)\r\n      setYourEvent(false)\r\n      setStage(true);\r\n    } else if (nearby === \"yourevents\") {\r\n      setStage(false)\r\n      setEventStage(false)\r\n      setYourEvent(true);\r\n\r\n    } else {\r\n      setStage(false);\r\n      setYourEvent(false)\r\n      setEventStage(true)\r\n\r\n    }\r\n  });\r\n  function getLocation() {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(showPosition);\r\n    }\r\n  }\r\n  const showPosition = (position) => {\r\n    setLong(position.coords.longitude);\r\n    setLatt(position.coords.latitude);\r\n  };\r\n  getLocation();\r\n  useEffect(() => {\r\n    const getEventLists = async () => {\r\n      const res = stage\r\n        ? await axios.post(`/api/event/nearby`, { long, latt })\r\n        : await axios.get(\"/api/event/all\");\r\n      \r\n      setEvents(res.data);\r\n    };\r\n    getEventLists();\r\n  }, [long, latt, stage, refresh]);\r\n\r\n\r\n  return (\r\n    <Card className={classes.main}>\r\n      <Typography\r\n        style={{ margin: \"10px 0px 20px 15px\", fontWeight: 500 }}\r\n        variant=\"h5\"\r\n      >\r\n        {stage ? \"Nearby Events\" : yourEvent? \"Intereted Events\": \"All Events\"}\r\n      </Typography>\r\n      <div className={classes.mainDiv}>\r\n        {events?.map((f) => {\r\n          return (\r\n            <>\r\n           {yourEvent? f.interested.includes('622ca39b28782d07e0b8f754') && <EventListCard\r\n              refresh={refresh}\r\n              setRefresh={setRefresh}\r\n              long={long}\r\n              latt={latt}\r\n              f={f}\r\n            /> : \r\n            <EventListCard\r\n              refresh={refresh}\r\n              setRefresh={setRefresh}\r\n              long={long}\r\n              latt={latt}\r\n              f={f}\r\n            />\r\n            }\r\n            </> \r\n          );\r\n        })}\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default EventList;\r\n"]},"metadata":{},"sourceType":"module"}