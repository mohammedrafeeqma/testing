{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{alpha,AppBar,Avatar,Badge,Card,Fade,InputBase,makeStyles,Menu,MenuItem,Toolbar,Typography}from\"@material-ui/core\";import{Cancel,ExitToAppOutlined,FeedbackOutlined,MenuOutlined,MessageOutlined,NotificationsActive,PersonAdd,Search}from\"@material-ui/icons\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router\";import{useDispatch,useSelector}from\"react-redux\";import{listProducts}from\"../../actions/productAction\";import axios from\"axios\";import{format}from'timeago.js';import{grey}from\"@material-ui/core/colors\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){var _logoLg,_icons;return{appbar:{backgroundColor:\"#0D8E8E\"},logoLg:(_logoLg={display:\"none\",fontFamily:'Bree Serif',fontSize:'28px'},_defineProperty(_logoLg,theme.breakpoints.up(\"sm\"),{display:\"block\"}),_defineProperty(_logoLg,\"&:hover\",{cursor:'pointer'}),_logoLg),logoSm:_defineProperty({display:\"block\"},theme.breakpoints.up(\"lg\"),{display:\"none\"}),toolbar:{display:\"flex\",justifyContent:\"space-between\"},search:_defineProperty({display:\"flex\",alignItems:\"center\",backgroundColor:alpha(theme.palette.common.white,0.15),\"&:hover\":{backgroundColor:alpha(theme.palette.common.white,0.25)},borderRadius:theme.shape.borderRadius,width:\"25%\"},theme.breakpoints.down(\"md\"),{display:function display(props){return props.open?\"flex\":\"none\";},width:function width(props){return props.open?\"60%\":\"25%\";}}),input:{color:\"white\",marginLeft:theme.spacing(2)},icons:(_icons={display:\"flex\",alignItems:\"center\"},_defineProperty(_icons,\"display\",function display(props){return props.open?\"none\":\"flex\";}),_defineProperty(_icons,\"&:hover\",{cursor:'pointer'}),_icons),badge:_defineProperty({marginRight:theme.spacing(2)},theme.breakpoints.down(\"sm\"),{marginRight:theme.spacing(2)}),chatBadge:_defineProperty({marginRight:theme.spacing(2)},theme.breakpoints.down(\"sm\"),{display:\"none\"}),searchButton:_defineProperty({marginRight:theme.spacing(1)},theme.breakpoints.up(\"sm\"),{display:\"none\"}),cancel:_defineProperty({},theme.breakpoints.up(\"sm\"),{display:\"none\"}),menu:_defineProperty({},theme.breakpoints.up(\"sm\"),{display:\"none\"}),more:{marginTop:theme.spacing(6)},notification:{// padding:'5px',\n'&:hover':{cursor:'pointer',backgroundColor:grey[100]}}};});function Navbar(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var navigate=useNavigate();var classes=useStyles({open:open});var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),anchorE1=_useState4[0],setAnchorE1=_useState4[1];var more=Boolean(anchorE1);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openNotification=_useState6[0],setOpenNotification=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchValue=_useState8[0],setSearchValue=_useState8[1];var userDetails=useSelector(function(state){return state.userDetails;});var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var handleMoreClick=function handleMoreClick(event){setAnchorE1(event.currentTarget);};var handleMoreClose=function handleMoreClose(){setAnchorE1(null);};var logoutHandler=function logoutHandler(){localStorage.removeItem(\"token\");localStorage.removeItem(\"userId\");navigate(\"/login\");};var dispatch=useDispatch();useEffect(function(){var fetchNotification=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/notification/'+user._id);case 2:res=_context.sent;setNotification(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchNotification(){return _ref.apply(this,arguments);};}();fetchNotification();},[user]);console.log(notification);useEffect(function(){dispatch(listProducts());},[dispatch]);var searchHandler=function searchHandler(e){setSearchValue(e.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();navigate('/search/'+searchValue);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(AppBar,{position:\"fixed\",className:classes.appbar,children:[/*#__PURE__*/_jsxs(Toolbar,{className:classes.toolbar,children:[/*#__PURE__*/_jsx(MenuOutlined,{className:classes.menu,onClick:function onClick(){return props.val(!props.menu);}}),/*#__PURE__*/_jsx(Typography,{onClick:function onClick(){return navigate(\"/\".concat(user._id));},variant:\"h5\",className:classes.logoLg,children:\"Social Chat\"}),/*#__PURE__*/_jsx(Typography,{onClick:function onClick(){return navigate(\"/\".concat(user._id));},variant:\"h6\",className:classes.logoSm,children:\"Social Chat\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.search,children:/*#__PURE__*/_jsxs(\"form\",{style:{display:'flex',alignItems:'center',marginLeft:'10px'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Search,{}),/*#__PURE__*/_jsx(InputBase,{placeholder:\"Search...\",className:classes.input,value:searchValue// onChange={(e)=>{setSearchValue(e.target.value)}}\n,onChange:searchHandler}),/*#__PURE__*/_jsx(Cancel,{className:classes.cancel,onClick:function onClick(){return setOpen(false);}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.icons,children:[/*#__PURE__*/_jsx(Search,{className:classes.searchButton,onClick:function onClick(){return setOpen(!open);}}),/*#__PURE__*/_jsx(Badge,{onClick:function onClick(){return setOpenNotification(!openNotification);},badgeContent:notification.length,color:\"secondary\",className:classes.badge,children:/*#__PURE__*/_jsx(NotificationsActive,{})}),/*#__PURE__*/_jsx(Avatar,{onClick:handleMoreClick,alt:\"Cindy Baker\",src:user.profilePicture?user.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'})]})]}),/*#__PURE__*/_jsxs(Menu,{className:classes.more,anchorEl:anchorE1,keepMounted:true,open:more,onClose:handleMoreClose,TransitionComponent:Fade,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:function onClick(){return navigate(\"/profile/\".concat(user.username));},children:[/*#__PURE__*/_jsx(Avatar,{style:{marginRight:7},alt:\"Cindy Baker\",src:user.profilePicture?user.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}),\" \",\"Profile\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMoreClose,children:[\" \",/*#__PURE__*/_jsx(FeedbackOutlined,{style:{marginRight:6}}),\" Feedback\",\" \"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:logoutHandler,children:[\" \",/*#__PURE__*/_jsx(ExitToAppOutlined,{style:{marginRight:6}}),\" Logout\"]})]})]}),/*#__PURE__*/_jsx(Card,{style:openNotification?{zIndex:90,position:'fixed',right:30,top:65,width:'19%',display:'block',backgroundColor:'white',height:'90vh'}:{display:'block'},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{style:{fontWeight:500,margin:'15px'},variant:\"h5\",children:\"Notification\"}),notification.map(function(n){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return navigate('/profile/'+n.friendName);},className:classes.notification,children:/*#__PURE__*/_jsxs(\"div\",{style:openNotification?{display:'flex',marginTop:'10px'}:{display:'none'},children:[/*#__PURE__*/_jsx(\"img\",{style:openNotification?{display:'block',borderRadius:'50%',margin:'6px 5px 0 10px'}:{display:'none'},width:\"30\",height:\"30\",src:n.img?n.img:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{style:{fontSize:16},component:\"span\",variant:\"h6\",children:n.friendName}),/*#__PURE__*/_jsxs(Typography,{component:\"span\",children:[\" \",n.action]}),/*#__PURE__*/_jsx(Typography,{style:{lineHeight:'0.6',fontSize:'12px'},children:format(n.createdAt)})]})]})});})]})})]});}export default Navbar;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/Navbar/Navbar.jsx"],"names":["alpha","AppBar","Avatar","Badge","Card","Fade","InputBase","makeStyles","Menu","MenuItem","Toolbar","Typography","Cancel","ExitToAppOutlined","FeedbackOutlined","MenuOutlined","MessageOutlined","NotificationsActive","PersonAdd","Search","useEffect","useState","useNavigate","useDispatch","useSelector","listProducts","axios","format","grey","useStyles","theme","appbar","backgroundColor","logoLg","display","fontFamily","fontSize","breakpoints","up","cursor","logoSm","toolbar","justifyContent","search","alignItems","palette","common","white","borderRadius","shape","width","down","props","open","input","color","marginLeft","spacing","icons","badge","marginRight","chatBadge","searchButton","cancel","menu","more","marginTop","notification","Navbar","setOpen","navigate","classes","anchorE1","setAnchorE1","Boolean","openNotification","setOpenNotification","searchValue","setSearchValue","userDetails","state","setNotification","loading","error","user","handleMoreClick","event","currentTarget","handleMoreClose","logoutHandler","localStorage","removeItem","dispatch","fetchNotification","get","_id","res","data","console","log","searchHandler","e","target","value","handleSubmit","preventDefault","val","length","profilePicture","username","zIndex","position","right","top","height","fontWeight","margin","map","n","friendName","img","action","lineHeight","createdAt"],"mappings":"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","sourcesContent":["import {\r\n  alpha,\r\n  AppBar,\r\n  Avatar,\r\n  Badge,\r\n  Card,\r\n  Fade,\r\n  InputBase,\r\n  makeStyles,\r\n  Menu,\r\n  MenuItem,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cancel,\r\n  ExitToAppOutlined,\r\n  FeedbackOutlined,\r\n  MenuOutlined,\r\n  MessageOutlined,\r\n  NotificationsActive,\r\n  PersonAdd,\r\n  Search,\r\n} from \"@material-ui/icons\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { listProducts } from \"../../actions/productAction\";\r\nimport axios from \"axios\";\r\nimport {format} from 'timeago.js'\r\nimport { grey } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appbar: {\r\n    backgroundColor: \"#0D8E8E\",\r\n  },\r\n  logoLg: {\r\n    display: \"none\",\r\n    fontFamily: 'Bree Serif',\r\n    fontSize:'28px' ,\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"block\",\r\n    },\r\n    \"&:hover\":{\r\n      cursor:'pointer'\r\n    }\r\n  },\r\n  logoSm: {\r\n    display: \"block\",\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  toolbar: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  search: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    backgroundColor: alpha(theme.palette.common.white, 0.15),\r\n    \"&:hover\": {\r\n      backgroundColor: alpha(theme.palette.common.white, 0.25),\r\n    },\r\n    borderRadius: theme.shape.borderRadius,\r\n    width: \"25%\",\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      display: (props) => (props.open ? \"flex\" : \"none\"),\r\n      width: (props) => (props.open ? \"60%\" : \"25%\"),\r\n    },\r\n  },\r\n  input: {\r\n    color: \"white\",\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n  icons: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    display: (props) => (props.open ? \"none\" : \"flex\"),\r\n    \"&:hover\":{\r\n      cursor:'pointer'\r\n    }\r\n  },\r\n  badge: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n  },\r\n  chatBadge: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  searchButton: {\r\n    marginRight: theme.spacing(1),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  cancel: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  menu: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  more: {\r\n    marginTop: theme.spacing(6),\r\n  },\r\n  notification:{\r\n    // padding:'5px',\r\n    '&:hover':{\r\n      cursor:'pointer',\r\n      backgroundColor:grey[100]\r\n    }\r\n  }\r\n}));\r\n\r\nfunction \r\nNavbar(props) {\r\n  const [open, setOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n  const classes = useStyles({ open });\r\n  const [anchorE1, setAnchorE1] = useState(null);\r\n  const more = Boolean(anchorE1);\r\n  const[openNotification, setOpenNotification] = useState(false)\r\n  const[searchValue, setSearchValue] = useState('')\r\n  const userDetails = useSelector( state => state.userDetails)\r\n  const[notification, setNotification] = useState([])\r\n  \r\n    const{ loading, error, user} = userDetails\r\n  const handleMoreClick = (event) => {\r\n    setAnchorE1(event.currentTarget);\r\n  };\r\n  const handleMoreClose = () => {\r\n    setAnchorE1(null);\r\n  };\r\n  const logoutHandler = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"userId\");\r\n\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(()=>{\r\n    const fetchNotification =async ()=>{\r\n      const res = await axios.get('/api/notification/'+user._id)\r\n      setNotification(res.data)\r\n    }\r\n    fetchNotification()\r\n  },[user])\r\n\r\n  console.log(notification);\r\n\r\n  useEffect(() => {\r\n    dispatch(listProducts());\r\n  }, [dispatch]);\r\n\r\n  const searchHandler = (e)=>{\r\n      setSearchValue(e.target.value)\r\n  }\r\n  const handleSubmit = async(e)=>{\r\n    e.preventDefault()\r\n    navigate('/search/'+searchValue)\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <AppBar position=\"fixed\" className={classes.appbar}>\r\n      <Toolbar className={classes.toolbar}>\r\n        <MenuOutlined\r\n          className={classes.menu}\r\n          onClick={() => props.val(!props.menu)}\r\n        />\r\n        <Typography onClick={()=>navigate(`/${user._id}`)} variant=\"h5\" className={classes.logoLg}>\r\n          Social Chat\r\n        </Typography>\r\n        <Typography onClick={()=>navigate(`/${user._id}`)} variant=\"h6\" className={classes.logoSm}>\r\n          Social Chat\r\n        </Typography>\r\n        <div className={classes.search}>\r\n          <form style={{display:'flex',alignItems:'center',marginLeft:'10px'}} onSubmit={handleSubmit}>\r\n          <Search/>\r\n          <InputBase\r\n            placeholder=\"Search...\"\r\n            className={classes.input}\r\n            value={searchValue}\r\n            // onChange={(e)=>{setSearchValue(e.target.value)}}\r\n            onChange={searchHandler}\r\n          ></InputBase>\r\n          <Cancel className={classes.cancel} onClick={() => setOpen(false)} />\r\n          </form>\r\n        </div>\r\n        <div className={classes.icons}>\r\n          <Search\r\n            className={classes.searchButton}\r\n            onClick={() => setOpen(!open)}\r\n          />\r\n          <Badge onClick={()=>setOpenNotification(!openNotification)} badgeContent={notification.length} color=\"secondary\" className={classes.badge}>\r\n            <NotificationsActive />\r\n          </Badge>\r\n          {/* <Badge badgeContent={2} color=\"secondary\" className={classes.badge}>\r\n            <PersonAdd />\r\n          </Badge>\r\n          <Badge\r\n            badgeContent={5}\r\n            color=\"secondary\"\r\n            className={classes.chatBadge}\r\n          >\r\n            <MessageOutlined />\r\n          </Badge> */}\r\n\r\n          <Avatar\r\n            onClick={handleMoreClick}\r\n            alt=\"Cindy Baker\"\r\n            src={user.profilePicture?user.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}\r\n          />\r\n        </div>\r\n      </Toolbar>\r\n      <Menu\r\n        className={classes.more}\r\n        anchorEl={anchorE1}\r\n        keepMounted\r\n        open={more}\r\n        onClose={handleMoreClose}\r\n        TransitionComponent={Fade}\r\n      >\r\n        <MenuItem onClick={()=> navigate(`/profile/${user.username}`)}>\r\n          <Avatar\r\n            style={{ marginRight: 7 }}\r\n            alt=\"Cindy Baker\"\r\n            src={user.profilePicture?user.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}\r\n          />{\" \"}\r\n          Profile\r\n        </MenuItem>\r\n        <MenuItem onClick={handleMoreClose}>\r\n          {\" \"}\r\n          <FeedbackOutlined style={{ marginRight: 6 }} /> Feedback{\" \"}\r\n        </MenuItem>\r\n        \r\n        <MenuItem onClick={logoutHandler}>\r\n          {\" \"}\r\n          <ExitToAppOutlined style={{ marginRight: 6 }} /> Logout\r\n        </MenuItem>\r\n      </Menu>\r\n    </AppBar>\r\n    <Card style={openNotification?{zIndex:90,position:'fixed',right:30,top:65,width:'19%',  display:'block',backgroundColor:'white',height:'90vh'}:{display:'block'}}>\r\n      <div>\r\n        <Typography style={{fontWeight:500,margin:'15px'}} variant=\"h5\">Notification</Typography>\r\n\r\n        {notification.map((n)=>{\r\n          return(\r\n            <div onClick={()=>navigate('/profile/'+n.friendName)} className={classes.notification}>\r\n              <div style={openNotification?{display:'flex',marginTop:'10px'}:{display:'none'}}>\r\n          <img style={openNotification?{display:'block',borderRadius:'50%',margin:'6px 5px 0 10px'}:{display:'none'}} width='30' height='30' src={n.img?n.img:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}/>\r\n          <div>\r\n            <Typography style={{fontSize:16}} component=\"span\" variant=\"h6\">{n.friendName}</Typography>\r\n            <Typography component='span'> {n.action}</Typography>\r\n            <Typography style={{lineHeight:'0.6',fontSize:'12px'}}>{format(n.createdAt)}</Typography>\r\n          </div>\r\n        </div>\r\n          </div>\r\n          )\r\n        })}\r\n        \r\n\r\n        \r\n      </div>\r\n\r\n\r\n      \r\n    </Card>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n"]},"metadata":{},"sourceType":"module"}