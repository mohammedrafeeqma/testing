{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\src\\\\components\\\\home\\\\feed\\\\Comment.jsx\",\n    _s = $RefreshSig$();\n\nimport { Button, makeStyles, TextareaAutosize, Typography } from \"@material-ui/core\";\nimport { grey } from \"@material-ui/core/colors\";\nimport { Delete, ThumbUp, ThumbUpOutlined } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { format } from 'timeago.js';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({}));\n\nfunction Comment(_ref) {\n  _s();\n\n  let {\n    fetchComment,\n    openComment,\n    c\n  } = _ref;\n  const classes = useStyles();\n  const [commentUser, setCommentUser] = useState('');\n  const userDetails = useSelector(state => state.userDetails);\n  const {\n    loading,\n    error,\n    user\n  } = userDetails;\n  const [commentLike, setCommentLike] = useState(c === null || c === void 0 ? void 0 : c.likes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [owner, setOwner] = useState(false);\n  const [refresh, setRefresh] = useState(false);\n  useEffect(() => {\n    const fetchUser = async () => {\n      const res = await axios.post('/api/user/', {\n        userId: c.userId\n      });\n      setCommentUser(res.data);\n    };\n\n    fetchUser();\n  }, [refresh]);\n  useEffect(() => {\n    setOwner(user._id === c.userId);\n  });\n  useEffect(() => {\n    setIsLiked(c === null || c === void 0 ? void 0 : c.likes.includes(user._id));\n  }, [user._id, c === null || c === void 0 ? void 0 : c.likes, refresh]);\n\n  const commentLikeHandler = () => {\n    try {\n      axios.put('/api/post/comment/' + c._id + '/like', {\n        userId: user._id\n      });\n    } catch (error) {}\n\n    setCommentLike(isLiked ? commentLike - 1 : commentLike + 1);\n    setIsLiked(!isLiked);\n  };\n\n  const commentDeleteHandler = async () => {\n    try {\n      await axios.delete('/api/post/comment/' + c._id); // openComment(true)\n      // setRefresh(!refresh)\n\n      fetchComment();\n    } catch (error) {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: c.comment && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: openComment ? {\n        margin: '10px',\n        display: 'flex',\n        backgroundColor: '',\n        width: '95%',\n        position: 'relative',\n        zIndex: '6'\n      } : {\n        display: 'none'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          width: \"30\",\n          height: \"30\",\n          style: {\n            borderRadius: '50%',\n            marginTop: '3px'\n          },\n          src: commentUser.profilePicture,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '0 8px',\n          padding: '8px',\n          backgroundColor: grey[100],\n          width: '100%',\n          Minheight: '30px',\n          borderRadius: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            style: {\n              fontSize: '14px',\n              marginRight: '8px'\n            },\n            variant: \"h6\",\n            component: \"span\",\n            children: commentUser.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            style: {\n              fontSize: '12px'\n            },\n            variant: \"p\",\n            component: \"span\",\n            children: format(c.createdAt)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: c.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), owner && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          right: 20,\n          top: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(Delete, {\n          onClick: commentDeleteHandler,\n          style: {\n            color: 'grey',\n            width: '15px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          right: 20,\n          bottom: -9,\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(ThumbUp, {\n          onClick: commentLikeHandler,\n          style: isLiked ? {\n            width: '15px',\n            color: '#0D8E8E',\n            marginRight: '3px'\n          } : {\n            width: '15px',\n            color: 'gray',\n            marginRight: '3px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            marginTop: '4px',\n            fontSize: '14px'\n          },\n          variant: \"p\",\n          children: commentLike\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n}\n\n_s(Comment, \"syfz284K1kfUYZ86LanSDtgZcfs=\", false, function () {\n  return [useStyles, useSelector];\n});\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/home/feed/Comment.jsx"],"names":["Button","makeStyles","TextareaAutosize","Typography","grey","Delete","ThumbUp","ThumbUpOutlined","axios","useEffect","useState","useSelector","format","moment","useStyles","theme","Comment","fetchComment","openComment","c","classes","commentUser","setCommentUser","userDetails","state","loading","error","user","commentLike","setCommentLike","likes","length","isLiked","setIsLiked","owner","setOwner","refresh","setRefresh","fetchUser","res","post","userId","data","_id","includes","commentLikeHandler","put","commentDeleteHandler","delete","comment","margin","display","backgroundColor","width","position","zIndex","borderRadius","marginTop","profilePicture","padding","Minheight","fontSize","marginRight","username","createdAt","right","top","color","bottom"],"mappings":"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","sourcesContent":["import {Button, makeStyles, TextareaAutosize, Typography} from \"@material-ui/core\"\r\nimport { grey } from \"@material-ui/core/colors\"\r\nimport { Delete, ThumbUp, ThumbUpOutlined } from \"@material-ui/icons\"\r\nimport axios from \"axios\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport {format} from 'timeago.js'\r\nimport moment from 'moment'\r\n\r\nconst useStyles = makeStyles((theme) => ({}))\r\n\r\nfunction Comment({fetchComment, openComment,c}) {\r\n    const classes = useStyles()\r\n    const[commentUser, setCommentUser] = useState('')\r\n    const userDetails = useSelector( state => state.userDetails)\r\n    const{ loading, error, user} = userDetails\r\n    const[commentLike, setCommentLike] = useState(c?.likes.length)\r\n    const[isLiked, setIsLiked] = useState(false)\r\n    const[owner, setOwner] = useState(false)\r\n    const[refresh, setRefresh] = useState(false)\r\n    useEffect(()=>{\r\n        const fetchUser = async()=>{\r\n            const res = await axios.post('/api/user/',{userId:c.userId})\r\n            setCommentUser(res.data)\r\n\r\n        }\r\n        fetchUser()\r\n    },[refresh])\r\n\r\n    useEffect(()=>{\r\n        setOwner(user._id===c.userId)\r\n    })\r\n \r\n    useEffect(()=>{\r\n        setIsLiked(c?.likes.includes(user._id))\r\n    },[user._id,c?.likes,refresh])\r\n    const commentLikeHandler = ()=>{\r\n        try {\r\n        axios.put('/api/post/comment/'+c._id+'/like',{userId:user._id})\r\n        } catch (error) {  }\r\n        setCommentLike(isLiked ? commentLike-1 : commentLike+1)\r\n        setIsLiked(!isLiked)\r\n    }\r\n    const commentDeleteHandler = async()=>{\r\n        try {\r\n             await axios.delete('/api/post/comment/'+c._id)\r\n            \r\n                // openComment(true)\r\n                // setRefresh(!refresh)\r\n                fetchComment()\r\n                \r\n               \r\n            \r\n            \r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\n  return (\r\n   <>\r\n  {c.comment && <div style={ openComment? {margin:'10px', display:'flex', backgroundColor:'', width:'95%', position:'relative',zIndex:'6' }:{display:'none'}}>\r\n                <div>\r\n                <img width='30' height='30' style={{borderRadius:'50%',marginTop:'3px'}} src={commentUser.profilePicture} alt=\"\" />\r\n                </div>\r\n                <div style={{margin:'0 8px', padding:'8px', backgroundColor:grey[100], width:'100%', Minheight:'30px', borderRadius:'20px'}}>\r\n                    \r\n                    <div>\r\n                        <Typography style={{fontSize:'14px', marginRight:'8px'}} variant=\"h6\" component='span'>{commentUser.username}</Typography>\r\n                        <Typography style={{fontSize:'12px'}} variant=\"p\" component='span'>{format(c.createdAt)}</Typography>\r\n                        \r\n                        {/* <Typography style={{fontSize:'12px'}} variant=\"p\" component='span'>{moment(commentUser.createdAt).startOf('hour').fromNow()}</Typography> */}\r\n\r\n                    </div>\r\n                    <p>{c.comment}</p>\r\n                </div>\r\n               { owner && <div style={{position:'absolute',right:20, top:0}}>\r\n                <Delete onClick={commentDeleteHandler} style={{color:'grey',width:'15px'}}/>\r\n                </div> }\r\n                <div style={{position:'absolute',right:20, bottom:-9,display:'flex'}}>\r\n                <ThumbUp onClick={commentLikeHandler} style={isLiked?{width:'15px', color:'#0D8E8E',marginRight:'3px'}:{width:'15px',color:'gray',marginRight:'3px'}}/>\r\n                <Typography style={{marginTop:'4px',fontSize:'14px'}} variant=\"p\">{commentLike}</Typography>\r\n                </div>\r\n    </div> }\r\n   </>\r\n  )\r\n}\r\n\r\nexport default Comment"]},"metadata":{},"sourceType":"module"}