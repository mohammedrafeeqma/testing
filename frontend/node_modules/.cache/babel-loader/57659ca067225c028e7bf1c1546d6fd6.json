{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Avatar,Button,Card,CardActions,CardContent,CardHeader,CardMedia,DialogActions,DialogContent,DialogTitle,IconButton,List,ListItem,ListItemIcon,ListItemText,makeStyles,Snackbar,TextareaAutosize,Typography}from\"@material-ui/core\";import{red}from\"@material-ui/core/colors\";import{Delete,DeleteOutlined,Favorite,FavoriteBorderOutlined,MoreVert,Report,ThumbUp}from\"@material-ui/icons\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{useSelector}from\"react-redux\";import{format}from'timeago.js';import{Alert,Dialog,ListItemButton}from\"@mui/material\";import{useNavigate}from\"react-router\";import Comment from\"./Comment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{container:{paddingTop:theme.spacing(10),backgroundColor:\"white\"},card:_defineProperty({marginBottom:theme.spacing(3),marginLeft:theme.spacing(1)},theme.breakpoints.up('sm'),{marginLeft:theme.spacing(15),marginRight:theme.spacing(15)}),media:{height:0,paddingTop:'56.25%',marginLeft:theme.spacing(2),marginRight:theme.spacing(2)},expand:{marginLeft:\"auto\"},avatar:{backgroundColor:red[500],\"&:hover\":{cursor:'pointer'}},likeColor:{color:\"primary\",backgroundColor:red},cardContent:{position:'relative'},option:{padding:0,margin:0,position:'absolute',top:-25,right:20,backgroundColor:'white',border:'1px solid black',zIndex:'1'},avatarImg:{objectFit:'fill',width:'40px',height:'40px'}};});function Post(_ref){var post=_ref.post;var classes=useStyles();var _useState=useState(),_useState2=_slicedToArray(_useState,2),userFriend=_useState2[0],setUserFriend=_useState2[1];var _useState3=useState(post===null||post===void 0?void 0:post.likes.length),_useState4=_slicedToArray(_useState3,2),like=_useState4[0],setLike=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLiked=_useState6[0],setIsLiked=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),postOption=_useState8[0],setPostOption=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),refresh=_useState10[0],setRefresh=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),confirm=_useState12[0],setConfirm=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),alertBar=_useState14[0],setAlertBar=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),openComment=_useState16[0],setOpenComment=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),comment=_useState20[0],setComment=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),commentMsg=_useState22[0],setCommentMsg=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),readMore=_useState24[0],setReadMore=_useState24[1];var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userPost=(user===null||user===void 0?void 0:user.username)===(userFriend===null||userFriend===void 0?void 0:userFriend.username);var navigate=useNavigate();var isFavourite=user.favourite.includes(post._id);useEffect(function(){setIsLiked(post===null||post===void 0?void 0:post.likes.includes(user._id));},[user._id,post===null||post===void 0?void 0:post.likes,refresh]);useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/user?userId=\".concat(post.userId));case 2:res=_context.sent;setUserFriend(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();fetchUser();},[post===null||post===void 0?void 0:post.userId,post,refresh]);var fetchComment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(p){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setOpenComment(!openComment);_context2.next=3;return axios.get('/api/post/comment/'+p);case 3:res=_context2.sent;setComment(res.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchComment(_x){return _ref3.apply(this,arguments);};}();var likeHandler=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put('/api/post/'+post._id+'/like',{userId:user._id});case 3:res=_context3.sent;if(!(res.data==\"The post has been Liked\"&&user._id!=post.userId)){_context3.next=7;break;}_context3.next=7;return axios.post('/api/notification/',{userId:userFriend._id,friendName:user.username,img:post.img,postId:post._id,action:'Liked your post'});case 7:_context3.next=11;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);case 11:setLike(isLiked?like-1:like+1);setIsLiked(!isLiked);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function likeHandler(){return _ref4.apply(this,arguments);};}();var reportHandle=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.put('/api/post/'+post._id+'/report',{userId:user._id});case 3:res=_context4.sent;setMessage(res.data);setPostOption(false);setAlertBar(true);_context4.next=11;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function reportHandle(){return _ref5.apply(this,arguments);};}();var addToFavourite=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.put('/api/post/'+post._id+'/favourite',{userId:user._id});case 3:res=_context5.sent;if(res){setMessage(res.data);setPostOption(false);setAlertBar(true);}_context5.next=9;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);case 9:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function addToFavourite(){return _ref6.apply(this,arguments);};}();var deleteHandle=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setConfirm(true);case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function deleteHandle(){return _ref7.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.delete('/api/post/'+post._id,{userId:user===null||user===void 0?void 0:user._id});case 2:res=_context7.sent;window.location.reload();setRefresh(!refresh);case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function deletePost(){return _ref8.apply(this,arguments);};}();var cancelDelete=function cancelDelete(){setConfirm(false);setPostOption(false);};var commentHandle=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.post('/api/post/comment/',{userId:user===null||user===void 0?void 0:user._id,postId:post._id,comment:commentMsg});case 3:res=_context8.sent;if(res.data){setCommentMsg('');fetchComment(post._id);setOpenComment(true);}_context8.next=9;break;case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](0);case 9:case\"end\":return _context8.stop();}}},_callee8,null,[[0,7]]);}));return function commentHandle(){return _ref9.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Snackbar,{open:alertBar,onClose:function onClose(){return setAlertBar(false);},autoHideDuration:2000,children:/*#__PURE__*/_jsx(Alert,{onClose:function onClose(){return setAlertBar(false);},severity:\"success\",children:message})}),post?/*#__PURE__*/_jsxs(Card,{className:classes.card,children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{onClick:function onClick(){navigate('/profile/'+userFriend.username);},className:classes.avatar,children:/*#__PURE__*/_jsx(\"img\",{className:classes.avatarImg,src:userFriend!==null&&userFriend!==void 0&&userFriend.profilePicture?userFriend.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'})}),action:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"settings\",onClick:function onClick(){setPostOption(!postOption);},children:/*#__PURE__*/_jsx(MoreVert,{})}),title:userFriend?userFriend.username:'',subheader:format(post.createdAt)}),/*#__PURE__*/_jsxs(CardContent,{className:classes.cardContent,children:[postOption&&/*#__PURE__*/_jsxs(List,{sx:{width:'100%',maxWidth:360},className:classes.option,children:[userPost&&/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsxs(ListItemButton,{onClick:deleteHandle,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Delete,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Delete\"})]})}),/*#__PURE__*/_jsx(ListItem,{onClick:reportHandle,disablePadding:true,children:/*#__PURE__*/_jsxs(ListItemButton,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Report,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Report\"})]})}),post.img&&/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsxs(ListItemButton,{onClick:addToFavourite,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Favorite,{color:isFavourite?'secondary':'amber'})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Favourite\"})]})})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\",children:post.desc})})]}),post.img?/*#__PURE__*/_jsx(CardMedia,{className:classes.media,image:post.img,title:\"city\"}):'',/*#__PURE__*/_jsxs(CardActions,{disableSpacing:true,children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"like\",className:classes.likeColor,onClick:likeHandler,children:/*#__PURE__*/_jsx(ThumbUp,{style:isLiked?{color:\"#2ab0b0\"}:{color:\"\"}})}),/*#__PURE__*/_jsx(Typography,{children:like}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"like\",className:classes.expand,children:/*#__PURE__*/_jsxs(Typography,{onClick:function onClick(){return fetchComment(post._id);},children:[comment.length?comment.length:'',\" Comments\"]})})]}),readMore?comment.map(function(c){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Comment,{fetchComment:fetchComment,c:c,openComment:openComment})});}):comment.slice(0,3).map(function(c){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Comment,{fetchComment:fetchComment,c:c,openComment:openComment})});}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'end'},children:[comment.length>3&&/*#__PURE__*/_jsx(Typography,{onClick:function onClick(){return setReadMore(true);},style:readMore?{display:'none'}:openComment?{display:'block',marginRight:'30px',marginBottom:'10px',color:'#0D8E8E'}:{display:'none'},children:\"Readmore\"}),comment.length>3&&/*#__PURE__*/_jsx(Typography,{onClick:function onClick(){return setReadMore(false);},style:readMore?{display:'block',marginRight:'30px',marginBottom:'10px',color:'#0D8E8E'}:{display:'none'},children:\"Readless\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:openComment?{display:'flex',justifyContent:'space-around',marginBottom:'10px'}:{display:'none'},children:[/*#__PURE__*/_jsx(TextareaAutosize,{value:commentMsg,onChange:function onChange(e){return setCommentMsg(e.target.value);},minRows:2,placeholder:\"Comments\",style:{width:'70%',borderRadius:'10px',paddingLeft:'8px',paddingTop:'8px'}}),/*#__PURE__*/_jsx(Button,{onClick:commentHandle,variant:\"contained\",style:{color:'white',backgroundColor:'green',height:'35px'},children:\"Send\"})]}),/*#__PURE__*/_jsxs(Dialog,{open:confirm,onClose:function onClose(){return setConfirm(false);},children:[/*#__PURE__*/_jsx(DialogTitle,{style:{fontWeight:700},children:\"Delete?\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(DialogContent,{children:\"Items that you delete can't be restored.\"}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deletePost(post);},variant:\"contained\",style:{color:'white',backgroundColor:'#0D8E8E'},children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return cancelDelete();},style:{color:'#0D8E8E',backgroundColor:'white'},children:\"Cancel\"})]})]})]}):\"\"]});}export default Post;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/home/feed/Post.jsx"],"names":["Avatar","Button","Card","CardActions","CardContent","CardHeader","CardMedia","DialogActions","DialogContent","DialogTitle","IconButton","List","ListItem","ListItemIcon","ListItemText","makeStyles","Snackbar","TextareaAutosize","Typography","red","Delete","DeleteOutlined","Favorite","FavoriteBorderOutlined","MoreVert","Report","ThumbUp","useEffect","useState","axios","useSelector","format","Alert","Dialog","ListItemButton","useNavigate","Comment","useStyles","theme","container","paddingTop","spacing","backgroundColor","card","marginBottom","marginLeft","breakpoints","up","marginRight","media","height","expand","avatar","cursor","likeColor","color","cardContent","position","option","padding","margin","top","right","border","zIndex","avatarImg","objectFit","width","Post","post","classes","userFriend","setUserFriend","likes","length","like","setLike","isLiked","setIsLiked","postOption","setPostOption","refresh","setRefresh","confirm","setConfirm","alertBar","setAlertBar","openComment","setOpenComment","message","setMessage","comment","setComment","commentMsg","setCommentMsg","readMore","setReadMore","userDetails","state","loading","error","user","userPost","username","navigate","isFavourite","favourite","includes","_id","fetchUser","get","userId","res","data","fetchComment","p","likeHandler","put","friendName","img","postId","action","reportHandle","addToFavourite","deleteHandle","deletePost","delete","window","location","reload","cancelDelete","commentHandle","profilePicture","createdAt","maxWidth","desc","map","c","slice","display","justifyContent","e","target","value","borderRadius","paddingLeft","fontWeight"],"mappings":"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","sourcesContent":["import {Avatar, Button, Card, CardActions, CardContent, CardHeader, CardMedia, DialogActions, DialogContent, DialogTitle, IconButton, List, ListItem, ListItemIcon, ListItemText, makeStyles, Snackbar, TextareaAutosize, Typography} from \"@material-ui/core\"\r\nimport { red } from \"@material-ui/core/colors\"\r\nimport { Delete, DeleteOutlined, Favorite, FavoriteBorderOutlined, MoreVert, Report, ThumbUp } from \"@material-ui/icons\"\r\nimport { useEffect, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { useSelector } from \"react-redux\"\r\nimport {format} from 'timeago.js'\r\nimport { Alert, Dialog, ListItemButton } from \"@mui/material\"\r\nimport { useNavigate } from \"react-router\"\r\nimport Comment from \"./Comment\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container:{\r\n        paddingTop: theme.spacing(10),\r\n        backgroundColor: \"white\"\r\n        \r\n    },\r\n    card:{\r\n        \r\n        marginBottom: theme.spacing(3),\r\n        marginLeft: theme.spacing(1),\r\n        [theme.breakpoints.up('sm')]:{\r\n           marginLeft: theme.spacing(15),\r\n           marginRight: theme.spacing(15)\r\n        }\r\n        \r\n    },\r\n    media:{\r\n        height: 0,\r\n    paddingTop: '56.25%',\r\n    marginLeft: theme.spacing(2),\r\n    marginRight: theme.spacing(2)\r\n    },\r\n    expand:{\r\n        marginLeft:\"auto\"\r\n    },\r\n    avatar:{\r\n        backgroundColor: red[500],\r\n        \"&:hover\":{\r\n          cursor:'pointer'\r\n        }\r\n    },\r\n    likeColor:{\r\n        color:\"primary\",\r\n        backgroundColor:red\r\n    },\r\n    cardContent:{\r\n        position:'relative'\r\n    },\r\n   option:{\r\n       padding:0,\r\n       margin:0,\r\n       position:'absolute',\r\n       top:-25,\r\n       right:20,\r\n       backgroundColor:'white',\r\n       border:'1px solid black',\r\n       zIndex:'1'\r\n\r\n    \r\n   },\r\n   avatarImg:{\r\n       objectFit:'fill',\r\n       width:'40px',\r\n       height:'40px'\r\n   }\r\n   \r\n    \r\n}))\r\n\r\nfunction Post({post}) {\r\n    \r\n    const classes = useStyles()\r\n    const[userFriend, setUserFriend] = useState()\r\n    const[like, setLike] = useState(post ?.likes.length)\r\n    const[isLiked, setIsLiked] = useState(false)\r\n    const[postOption, setPostOption] = useState(false)\r\n    const[refresh, setRefresh] = useState(false)\r\n    const[confirm, setConfirm] = useState(false)\r\n    const[alertBar, setAlertBar] = useState(false)\r\n    const[openComment, setOpenComment] = useState(false)\r\n    const[message, setMessage] = useState('')\r\n    const[comment, setComment] = useState([])\r\n    const[commentMsg, setCommentMsg] = useState('')\r\n    const[readMore, setReadMore] = useState('')\r\n    const userDetails = useSelector( state => state.userDetails)\r\n    const{ loading, error, user} = userDetails\r\n    let userPost = user?.username === userFriend?.username\r\n    const navigate = useNavigate()\r\n   const isFavourite = user.favourite.includes(post._id)\r\n\r\n    useEffect(()=>{\r\n        setIsLiked(post?.likes.includes(user._id))\r\n    },[user._id, post?.likes,refresh])\r\n\r\n    useEffect(()=>{\r\n        const fetchUser = async()=>{\r\n            const res = await axios.get(`/api/user?userId=${post.userId}`)\r\n            setUserFriend(res.data)\r\n            \r\n        }\r\n        fetchUser()\r\n    },[post?.userId,post,refresh])\r\n\r\n       const fetchComment = async(p)=>{\r\n            setOpenComment(!openComment)\r\n            const res = await axios.get('/api/post/comment/'+p)\r\n            setComment(res.data)\r\n        }\r\n        \r\n    \r\n    const likeHandler = async()=>{\r\n        try{\r\n           const res = await axios.put('/api/post/'+post._id+'/like',{userId: user._id})\r\n           if(res.data==\"The post has been Liked\" && user._id!=post.userId)\r\n           {\r\n               await axios.post('/api/notification/',{\r\n                userId:userFriend._id,\r\n                friendName:user.username,\r\n                img:post.img,\r\n                postId:post._id,\r\n                action:'Liked your post'\r\n            })\r\n           }\r\n            \r\n        }\r\n        catch(err)\r\n        {}\r\n            setLike(isLiked ? like-1: like+1);\r\n            setIsLiked(!isLiked)\r\n        \r\n    }\r\n    const reportHandle = async() => {\r\n        try {\r\n            const res = await axios.put('/api/post/'+post._id+'/report',{userId:user._id})\r\n            setMessage(res.data)\r\n            setPostOption(false)\r\n            setAlertBar(true)\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n    const addToFavourite = async()=>{\r\n\r\n        try {\r\n           const res = await axios.put('/api/post/'+post._id+'/favourite', {userId: user._id})\r\n           if(res)\r\n           {\r\n            setMessage(res.data)\r\n            setPostOption(false)\r\n            setAlertBar(true)\r\n           }\r\n        } catch (error) {\r\n            \r\n        }\r\n    }\r\n    const deleteHandle = async()=>{\r\n        setConfirm(true)\r\n    }\r\n    const deletePost=async()=>{\r\n         const res = await axios.delete('/api/post/'+post._id, {userId: user?._id})\r\n         window.location.reload()\r\n         setRefresh(!refresh)\r\n         \r\n    }\r\n    const cancelDelete = ()=>{\r\n        setConfirm(false)\r\n        setPostOption(false)\r\n\r\n    }\r\n\r\n    const commentHandle = async()=>{\r\n       try {\r\n           const res = await axios.post('/api/post/comment/',{userId:user?._id, postId:post._id,comment:commentMsg})\r\n           if(res.data)\r\n           {\r\n               setCommentMsg('')\r\n               fetchComment(post._id)\r\n               setOpenComment(true)\r\n           }\r\n       } catch (error) {\r\n\r\n           \r\n       }\r\n    }\r\n    \r\n  return (\r\n    <>\r\n        \r\n    <Snackbar open={alertBar} onClose={()=>setAlertBar(false)} autoHideDuration={2000}>\r\n        <Alert onClose={()=>setAlertBar(false)} severity='success'>{message}</Alert>\r\n    </Snackbar>\r\n\r\n    {post?\r\n    <Card className={classes.card}>\r\n        <CardHeader\r\n        avatar={\r\n            <Avatar onClick={()=>{navigate('/profile/'+userFriend.username)}} className={classes.avatar}>\r\n                <img className={classes.avatarImg} src={userFriend?.profilePicture? userFriend.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}/>\r\n            </Avatar>\r\n        }\r\n        action={\r\n            <IconButton aria-label=\"settings\" onClick={()=>{setPostOption(!postOption)}}>\r\n                <MoreVert />\r\n                  \r\n            </IconButton>\r\n            \r\n        }\r\n        title=  {userFriend? userFriend.username :''}\r\n        subheader={format(post.createdAt)}\r\n        >\r\n\r\n        </CardHeader>\r\n        <CardContent className={classes.cardContent}>\r\n        {postOption&&  <List sx={{ width: '100%', maxWidth: 360 }} className={classes.option}>\r\n                       {userPost&& <ListItem  disablePadding>\r\n                            <ListItemButton onClick={deleteHandle}>\r\n                                <ListItemIcon>\r\n                                    <Delete/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary='Delete'/>\r\n                            </ListItemButton>\r\n                        </ListItem>}\r\n                        <ListItem onClick={reportHandle} disablePadding>\r\n                            <ListItemButton>\r\n                                <ListItemIcon>\r\n                                    <Report/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary='Report'/>\r\n                            </ListItemButton>\r\n                        </ListItem>\r\n                        {post.img && <ListItem disablePadding>\r\n                            <ListItemButton onClick={addToFavourite}>\r\n                                <ListItemIcon>\r\n                                    <Favorite  color={isFavourite? 'secondary':'amber'}/>\r\n                                </ListItemIcon>\r\n                                <ListItemText primary='Favourite'/>\r\n                            </ListItemButton>\r\n                        </ListItem>}\r\n                </List>\r\n                \r\n                }\r\n            <CardActions>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                    {post.desc}\r\n                </Typography>\r\n            </CardActions>\r\n        </CardContent>\r\n        {post.img?\r\n        <CardMedia\r\n        className={classes.media}\r\n        image={post.img}\r\n        title = \"city\"\r\n        />\r\n        :''}\r\n        \r\n        <CardActions disableSpacing>\r\n            <IconButton aria-label=\"like\" className={classes.likeColor} onClick={likeHandler}>\r\n                <ThumbUp style={isLiked?{color:\"#2ab0b0\"}:{color:\"\"}}/>  \r\n            </IconButton>\r\n            <Typography>{like}</Typography>\r\n            <IconButton aria-label=\"like\" className={classes.expand}>\r\n                <Typography onClick={()=>fetchComment(post._id)}>{comment.length?comment.length:''} Comments</Typography>\r\n            </IconButton>\r\n        </CardActions>\r\n        {\r\n            readMore?\r\n            comment.map((c)=>{\r\n                return(\r\n                    <>\r\n                   <Comment fetchComment={fetchComment} c={c} openComment={openComment}/>\r\n\r\n                    </>\r\n                )\r\n            })\r\n            :\r\n            comment.slice(0,3).map((c)=>{\r\n                return(\r\n                    <>\r\n                   <Comment fetchComment={fetchComment} c={c} openComment={openComment}/>\r\n        \r\n                    </>\r\n                   \r\n                )\r\n            })\r\n        \r\n    \r\n        }\r\n        <div style={{display:'flex', justifyContent:'end'}}>\r\n       { comment.length>3 && <Typography onClick={()=>setReadMore(true)} style={readMore?{display:'none'} :openComment?{display:'block',marginRight:'30px',marginBottom:'10px',color:'#0D8E8E'}:{display:'none'}}>Readmore</Typography>\r\n        }\r\n\r\n        {comment.length>3 && <Typography onClick={()=>setReadMore(false)} style={readMore?{display:'block',marginRight:'30px',marginBottom:'10px',color:'#0D8E8E'}:{display:'none'}}>Readless</Typography>\r\n        }\r\n    \r\n\r\n         </div>        \r\n        <div style={openComment?{display:'flex', justifyContent:'space-around',marginBottom:'10px'}:{display:'none'}}>\r\n        <TextareaAutosize\r\n        value={commentMsg}\r\n        onChange={(e)=>setCommentMsg(e.target.value)}\r\n        minRows={2}\r\n        placeholder=\"Comments\"\r\n        style={{width:'70%', borderRadius:'10px',paddingLeft:'8px',paddingTop:'8px'}}\r\n        />\r\n\r\n        <Button onClick={commentHandle}  variant=\"contained\" style={{color:'white', backgroundColor:'green',height:'35px'}}>Send</Button>\r\n\r\n    </div>\r\n            \r\n\r\n        <Dialog open={confirm} onClose={()=>setConfirm(false)}>\r\n        <DialogTitle style={{fontWeight:700}}>\r\n            Delete?\r\n        </DialogTitle>\r\n        <hr/>\r\n        <DialogContent>\r\n        Items that you delete can't be restored.\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button onClick={()=>deletePost(post)} variant=\"contained\" style={{color:'white', backgroundColor:'#0D8E8E'}}>Delete</Button>\r\n            <Button variant=\"contained\" onClick={()=>cancelDelete()} style={{color:'#0D8E8E', backgroundColor:'white'}}>Cancel</Button>\r\n        </DialogActions>\r\n\r\n    </Dialog>\r\n\r\n    </Card>\r\n    :\"\"}\r\n\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\n\r\nexport default Post"]},"metadata":{},"sourceType":"module"}