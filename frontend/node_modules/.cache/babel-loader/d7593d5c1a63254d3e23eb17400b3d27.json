{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Card,makeStyles}from\"@material-ui/core\";import{Cancel,EmojiEmotions,Label,PermMedia,Room}from\"@material-ui/icons\";import{Dialog,DialogTitle,Tooltip,Typography}from\"@mui/material\";import axios from\"axios\";import{useState}from\"react\";import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){var _ref;return _ref={share:{borderRadius:\"10px\",backgroundColor:\"\",// marginTop: theme.spacing(5),\nmarginBottom:theme.spacing(5),margin:theme.spacing(1),minHeight:\"50vh\",position:'relative'},shareWrapper:{padding:\"10px\"},shareTop:{display:\"flex\",alignItems:\"center\"},shareProfileImg:{width:\"50px\",height:\"50px\",borderRadius:\"50%\",objectFit:\"cover\",marginRight:\"10px\"},shareInput:{border:\"none\",width:\"80%\",height:'100%',fontSize:'16px',\"&:hover\":{height:'100%',padding:'10px',border:'none'}},shareHr:{margin:\"20px\",width:\"90%\"},shareImg:{width:\"100%\",objectFit:\"cover\"},shareCancelImg:{position:\"absolute\",top:\"0\",right:\"20px\",cursor:\"pointer\",opacity:\"0.7\"},shareBottom:{display:\"flex\",alignItems:\"center\",justifyContent:\"spaceBetween\"},shareOptions:{display:\"flex\",marginLeft:\"20px\"},shareOption:{display:\"flex\",alignItems:\"center\",marginRight:\"15px\",cursor:\"pointer\"},shareIcon:_defineProperty({fontSize:\"28px\",marginRight:\"8px\"},theme.breakpoints.down('sm'),{fontSize:\"34px\"}),shareOptionText:{fontSize:\"14px\",fontWeight:\"500\"},shareButton:_defineProperty({border:\"none\",padding:\"7px\",borderRadius:\"5px\",backgroundColor:\"green\",fontWeight:500,marginRight:\"20px\",cursor:\"pointer\",color:\"white\",position:'absolute',bottom:10,right:30},theme.breakpoints.down('sm'),{width:\"80%\",right:0,left:15,bottom:0}),shareImgContainer:{padding:\"0 20px 10px 20px\",position:\"relative\"}},_defineProperty(_ref,\"shareImg\",{width:\"100%\",objectFit:\"cover\"}),_defineProperty(_ref,\"shareCancelImg\",{position:\"absolute\",top:\"0\",right:\"20px\",cursor:\"pointer\",opacity:\"0.7\"}),_defineProperty(_ref,\"feelings\",_defineProperty({display:\"flex\",alignItems:\"center\",marginRight:\"15px\",cursor:\"pointer\"},theme.breakpoints.down(\"sm\"),{display:\"none\"})),_defineProperty(_ref,\"shareImgPreviewContainer\",{position:'relative',height:\"50px\",width:\"50%\",backgroundColor:'red',marginBottom:theme.spacing(9)}),_defineProperty(_ref,\"shareImgPreview\",{height:\"100%px\",width:\"100%\"}),_defineProperty(_ref,\"cancelButton\",{position:\"absolute\",right:'0'}),_defineProperty(_ref,\"formError\",{marginLeft:theme.spacing(3)}),_ref;});function UploadPostDialogue(_ref2){var openShare=_ref2.openShare,handleClose=_ref2.handleClose;var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),formError=_useState4[0],setFormError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setDescription=_useState8[1];var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var formHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var reader,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();reader=new FileReader();if(file){_context2.next=15;break;}_context2.prev=3;_context2.next=6;return axios.post('api/post/',{userId:user._id,desc:description});case 6:handleClose();_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);response=_context2.t0.response;console.log(response);case 13:_context2.next=17;break;case 15:reader.readAsDataURL(file);reader.onloadend=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setImage(reader.result);if(file.size<100000){imageSubmit(reader.result);}else{setFormError('*image size is larger');}case 2:case\"end\":return _context.stop();}}},_callee);}));case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return function formHandler(_x){return _ref3.apply(this,arguments);};}();var imageSubmit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(base64image){var suc,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post('api/post/upload',{image:base64image});case 3:suc=_context3.sent;_context3.next=6;return axios.post('api/post/',{userId:user._id,desc:description,img:suc.data});case 6:handleClose();_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);response=_context3.t0.response;console.log(response);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function imageSubmit(_x2){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Dialog,{open:openShare,onClose:handleClose,fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Create a Post\"}),formError?/*#__PURE__*/_jsx(Typography,{className:classes.formError,color:\"red\",children:formError}):'',/*#__PURE__*/_jsxs(Card,{className:classes.share,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.shareWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.shareTop,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.shareProfileImg,src:user.profilePicture?user.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What's in your mind\",value:description,onChange:function onChange(e){setDescription(e.target.value);},className:classes.shareInput})]}),/*#__PURE__*/_jsx(\"hr\",{className:classes.shareHr}),/*#__PURE__*/_jsx(\"div\",{className:classes.shareImgContainer,children:/*#__PURE__*/_jsx(\"img\",{className:classes.shareImg,src:\"\"})}),/*#__PURE__*/_jsxs(\"form\",{className:classes.shareBottom,onSubmit:formHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.shareOptions,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:classes.shareOption,children:[/*#__PURE__*/_jsx(PermMedia,{htmlColor:\"tomato\",className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",accept:\".png,.jpeg,.jpg\",onInputCapture:function onInputCapture(e){setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(Tooltip,{title:\"comming soon\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.feelings,children:[/*#__PURE__*/_jsx(Label,{htmlColor:\"blue\",className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Tag\"})]})}),/*#__PURE__*/_jsx(Tooltip,{title:\"comming soon\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.feelings,children:[/*#__PURE__*/_jsx(Room,{htmlColor:\"green\",className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Location\"})]})}),/*#__PURE__*/_jsx(Tooltip,{title:\"comming soon\",children:/*#__PURE__*/_jsxs(\"div\",{className:classes.feelings,children:[/*#__PURE__*/_jsx(EmojiEmotions,{htmlColor:\"goldenrod\",className:classes.shareIcon}),/*#__PURE__*/_jsx(\"span\",{className:classes.shareOptionText,children:\"Feelings\"})]})})]}),/*#__PURE__*/_jsx(\"button\",{className:classes.shareButton,type:\"submit\",children:\"Share\"})]})]}),file&&/*#__PURE__*/_jsxs(\"div\",{className:classes.shareImgPreviewContainer,children:[/*#__PURE__*/_jsx(Cancel,{className:classes.cancelButton}),/*#__PURE__*/_jsx(\"img\",{className:classes.shareImgPreview,src:URL.createObjectURL(file),alt:\"\"})]})]})]});}export default UploadPostDialogue;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/home/UploadPostDialogue.jsx"],"names":["Card","makeStyles","Cancel","EmojiEmotions","Label","PermMedia","Room","Dialog","DialogTitle","Tooltip","Typography","axios","useState","useSelector","useStyles","theme","share","borderRadius","backgroundColor","marginBottom","spacing","margin","minHeight","position","shareWrapper","padding","shareTop","display","alignItems","shareProfileImg","width","height","objectFit","marginRight","shareInput","border","fontSize","shareHr","shareImg","shareCancelImg","top","right","cursor","opacity","shareBottom","justifyContent","shareOptions","marginLeft","shareOption","shareIcon","breakpoints","down","shareOptionText","fontWeight","shareButton","color","bottom","left","shareImgContainer","UploadPostDialogue","openShare","handleClose","classes","file","setFile","formError","setFormError","image","setImage","description","setDescription","userDetails","state","loading","error","user","formHandler","e","preventDefault","reader","FileReader","post","userId","_id","desc","response","console","log","readAsDataURL","onloadend","result","size","imageSubmit","base64image","suc","img","data","profilePicture","target","value","files","feelings","shareImgPreviewContainer","cancelButton","shareImgPreview","URL","createObjectURL"],"mappings":"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","sourcesContent":["import { Card, makeStyles } from \"@material-ui/core\";\r\nimport { Cancel, EmojiEmotions, Label, PermMedia, Room } from \"@material-ui/icons\";\r\nimport { Dialog, DialogTitle, Tooltip, Typography } from \"@mui/material\";\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport {useSelector} from 'react-redux'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  share: {\r\n    \r\n    borderRadius: \"10px\",\r\n    backgroundColor: \"\",\r\n    // marginTop: theme.spacing(5),\r\n    marginBottom: theme.spacing(5),\r\n    margin: theme.spacing(1),\r\n    minHeight: \"50vh\",\r\n    position: 'relative'\r\n  },\r\n  shareWrapper: {\r\n    padding: \"10px\",\r\n  },\r\n  shareTop: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  shareProfileImg: {\r\n    width: \"50px\",\r\n    height: \"50px\",\r\n    borderRadius: \"50%\",\r\n    objectFit: \"cover\",\r\n    marginRight: \"10px\",\r\n  },\r\n  shareInput: {\r\n    border: \"none\",\r\n    width: \"80%\",\r\n    height:'100%',\r\n    fontSize:'16px',\r\n    \"&:hover\":{\r\n      height:'100%',\r\n      padding:'10px',\r\n      border:'none'\r\n    }\r\n  },\r\n  shareHr: {\r\n    margin: \"20px\",\r\n    width: \"90%\",\r\n  },\r\n  shareImg: {\r\n    width: \"100%\",\r\n    objectFit: \"cover\",\r\n  },\r\n\r\n  shareCancelImg: {\r\n    position: \"absolute\",\r\n    top: \"0\",\r\n    right: \"20px\",\r\n    cursor: \"pointer\",\r\n    opacity: \"0.7\",\r\n  },\r\n  shareBottom: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"spaceBetween\"\r\n  },\r\n\r\n  shareOptions: {\r\n    display: \"flex\",\r\n    marginLeft: \"20px\",\r\n  },\r\n\r\n  shareOption: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginRight: \"15px\",\r\n    cursor: \"pointer\",\r\n  },\r\n\r\n  shareIcon: {\r\n    fontSize: \"28px\",\r\n    marginRight: \"8px\",\r\n    [theme.breakpoints.down('sm')]:{\r\n        fontSize:\"34px\"\r\n    }\r\n  },\r\n\r\n  shareOptionText: {\r\n    fontSize: \"14px\",\r\n    fontWeight: \"500\",\r\n  },\r\n\r\n  shareButton: {\r\n    border: \"none\",\r\n    padding: \"7px\",\r\n    borderRadius: \"5px\",\r\n    backgroundColor: \"green\",\r\n    fontWeight: 500,\r\n    marginRight: \"20px\",\r\n    cursor: \"pointer\",\r\n    color: \"white\",\r\n    position:'absolute',\r\n    bottom:10,\r\n    right:30,\r\n    [theme.breakpoints.down('sm')]:{\r\n        width:\"80%\",\r\n        right:0,\r\n        left:15,\r\n        bottom:0\r\n    }\r\n  },\r\n\r\n  shareImgContainer: {\r\n    padding: \"0 20px 10px 20px\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  shareImg: {\r\n    width: \"100%\",\r\n    objectFit: \"cover\",\r\n  },\r\n\r\n  shareCancelImg: {\r\n    position: \"absolute\",\r\n    top: \"0\",\r\n    right: \"20px\",\r\n    cursor: \"pointer\",\r\n    opacity: \"0.7\",\r\n  },\r\n \r\n  feelings: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginRight: \"15px\",\r\n    cursor: \"pointer\",\r\n\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  shareImgPreviewContainer:{\r\n    position:'relative',\r\n    height:\"50px\",\r\n    width:\"50%\",\r\n    backgroundColor:'red',\r\n    marginBottom:theme.spacing(9)\r\n  },\r\n  shareImgPreview:{\r\n    height:\"100%px\",\r\n    width:\"100%\",\r\n  },\r\n  cancelButton:{\r\n    position:\"absolute\",\r\n    right:'0'\r\n  },\r\n  formError:{\r\n    marginLeft:theme.spacing(3)\r\n  }\r\n}));\r\n\r\nfunction UploadPostDialogue({ openShare, handleClose }) {\r\n  const classes = useStyles();\r\n  const[file, setFile] = useState(null)\r\n  const[formError, setFormError] = useState('')\r\n  const[image, setImage] = useState(null)\r\n  const[description, setDescription]= useState('')\r\n  const userDetails = useSelector( state => state.userDetails)\r\n  const{ loading, error, user} = userDetails\r\n  const formHandler= async(e)=>{\r\n    e.preventDefault()\r\n    let reader = new FileReader\r\n    if(!file)\r\n      {\r\n        try {\r\n          await axios.post('api/post/',{userId:user._id, desc:description})\r\n          handleClose()\r\n        } catch ({response}) {\r\n          console.log(response);\r\n        }\r\n      }\r\n      else{\r\n         reader.readAsDataURL(file);\r\n    reader.onloadend = async()=>{\r\n      setImage(reader.result)\r\n      \r\n      if(file.size<100000)\r\n      {\r\n        imageSubmit(reader.result)\r\n      }\r\n      else{\r\n        setFormError('*image size is larger')\r\n    \r\n      }\r\n      \r\n    }\r\n      }\r\n   \r\n    \r\n  }\r\n\r\n  const imageSubmit= async(base64image)=>{\r\n    try {\r\n      let suc = await axios.post('api/post/upload',{image:base64image})\r\n      await axios.post('api/post/',{userId:user._id,desc:description, img:suc.data})\r\n      handleClose()\r\n    } catch ({response}) {\r\n      console.log(response);\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <Dialog open={openShare} onClose={handleClose} fullWidth>\r\n      <DialogTitle>Create a Post</DialogTitle>\r\n      {formError? <Typography className={classes.formError} color='red'>{formError}</Typography> :'' }\r\n      <Card className={classes.share}> \r\n        <div className={classes.shareWrapper}>\r\n          <div className={classes.shareTop}>\r\n            <img\r\n              className={classes.shareProfileImg}\r\n              src={user.profilePicture?user.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}\r\n            />\r\n            <textarea\r\n\r\n              placeholder=\"What's in your mind\"\r\n              value={description}\r\n              onChange={(e)=>{setDescription(e.target.value)}}\r\n              className={classes.shareInput}\r\n            />\r\n          </div>\r\n          <hr className={classes.shareHr} />\r\n          <div className={classes.shareImgContainer}>\r\n            <img className={classes.shareImg} src=\"\" />\r\n          </div>\r\n\r\n          <form className={classes.shareBottom} onSubmit={formHandler}>\r\n            <div className={classes.shareOptions}>\r\n              <label htmlFor=\"file\" className={classes.shareOption}>\r\n                <PermMedia htmlColor=\"tomato\" className={classes.shareIcon} />\r\n                <span className={classes.shareOptionText}>Photo or Video</span>\r\n                <input\r\n                  style={{ display: \"none\" }}\r\n                  type=\"file\"\r\n                  id=\"file\"\r\n                  accept=\".png,.jpeg,.jpg\"\r\n                  onInputCapture={(e)=>{setFile(e.target.files[0])}}\r\n                />\r\n              </label>\r\n              <Tooltip title=\"comming soon\">\r\n              <div className={(classes.feelings)}>\r\n                <Label htmlColor=\"blue\" className={classes.shareIcon} />\r\n                <span className={classes.shareOptionText}>Tag</span>\r\n              </div>\r\n              </Tooltip>\r\n              <Tooltip title=\"comming soon\">\r\n              <div className={(classes.feelings)}>\r\n                <Room htmlColor=\"green\" className={classes.shareIcon} />\r\n                <span className={classes.shareOptionText}>Location</span>\r\n              </div>\r\n              </Tooltip>\r\n              <Tooltip title=\"comming soon\">\r\n              <div className={(classes.feelings)}>\r\n                <EmojiEmotions\r\n                  htmlColor=\"goldenrod\"\r\n                  className={classes.shareIcon}\r\n                />\r\n                <span className={classes.shareOptionText}>Feelings</span>\r\n              </div>\r\n              </Tooltip>\r\n            </div>\r\n            <button className={classes.shareButton} type=\"submit\">\r\n              Share\r\n            </button>\r\n          </form>\r\n        </div>\r\n        {file && (\r\n          <div className={classes.shareImgPreviewContainer}>\r\n            <Cancel className={classes.cancelButton}/>\r\n            <img className={classes.shareImgPreview} src={URL.createObjectURL(file)} alt=\"\"/>\r\n          </div>\r\n        )}\r\n      </Card>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default UploadPostDialogue;\r\n"]},"metadata":{},"sourceType":"module"}