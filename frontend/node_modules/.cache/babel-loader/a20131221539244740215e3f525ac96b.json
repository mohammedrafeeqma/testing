{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Container,makeStyles}from\"@material-ui/core\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import Post from\"../feed/Post\";import UploadPost from\"../UploadPost\";import axios from\"axios\";import{listuserDetails}from\"../../../actions/productAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{container:{paddingTop:theme.spacing(10),backgroundColor:theme.palette.grey[50]}};});function Feed(_ref){var username=_ref.username;var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var id=localStorage.getItem(\"userId\");var dispatch=useDispatch();useEffect(function(){dispatch(listuserDetails(id));},[id,dispatch]);var classes=useStyles();var _useState=useState(),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!username){_context.next=6;break;}_context.next=3;return axios.get(\"/api/post/profile/\"+username);case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return axios.get(\"/api/post/timeline/\"+user._id);case 8:_context.t0=_context.sent;case 9:res=_context.t0;console.log(res.data);setPosts(res.data.sort(function(p1,p2){return new Date(p2.createdAt)-new Date(p1.createdAt);}));case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();fetchPosts();},[user._id],posts);return/*#__PURE__*/_jsxs(Container,{className:classes.container,children:[!username||username==user.username&&/*#__PURE__*/_jsx(UploadPost,{}),username?\"\":/*#__PURE__*/_jsx(UploadPost,{}),posts===null||posts===void 0?void 0:posts.map(function(p){return/*#__PURE__*/_jsx(Post,{post:p},p._id);})]});}export default Feed;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/home/feed/Feed.jsx"],"names":["Container","makeStyles","useEffect","useState","useDispatch","useSelector","Post","UploadPost","axios","listuserDetails","useStyles","theme","container","paddingTop","spacing","backgroundColor","palette","grey","Feed","username","userDetails","state","loading","error","user","id","localStorage","getItem","dispatch","classes","posts","setPosts","fetchPosts","get","_id","res","console","log","data","sort","p1","p2","Date","createdAt","map","p"],"mappings":"qaAAA,OAASA,SAAT,CAAoBC,UAApB,KAAsC,mBAAtC,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,eAAT,KAAgC,gCAAhC,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGT,UAAU,CAAC,SAACU,KAAD,QAAY,CACvCC,SAAS,CAAE,CACTC,UAAU,CAAEF,KAAK,CAACG,OAAN,CAAc,EAAd,CADH,CAETC,eAAe,CAAEJ,KAAK,CAACK,OAAN,CAAcC,IAAd,CAAmB,EAAnB,CAFR,CAD4B,CAAZ,EAAD,CAA5B,CAOA,QAASC,CAAAA,IAAT,MAA4B,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CAC1B,GAAMC,CAAAA,WAAW,CAAGf,WAAW,CAAC,SAACgB,KAAD,QAAWA,CAAAA,KAAK,CAACD,WAAjB,EAAD,CAA/B,CACA,GAAQE,CAAAA,OAAR,CAAiCF,WAAjC,CAAQE,OAAR,CAAiBC,KAAjB,CAAiCH,WAAjC,CAAiBG,KAAjB,CAAwBC,IAAxB,CAAiCJ,WAAjC,CAAwBI,IAAxB,CACA,GAAMC,CAAAA,EAAE,CAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CACA,GAAMC,CAAAA,QAAQ,CAAGxB,WAAW,EAA5B,CACAF,SAAS,CAAC,UAAM,CACd0B,QAAQ,CAACnB,eAAe,CAACgB,EAAD,CAAhB,CAAR,CACD,CAFQ,CAEN,CAACA,EAAD,CAAKG,QAAL,CAFM,CAAT,CAGA,GAAMC,CAAAA,OAAO,CAAGnB,SAAS,EAAzB,CACA,cAA0BP,QAAQ,EAAlC,wCAAO2B,KAAP,eAAcC,QAAd,eAEA7B,SAAS,CACP,UAAM,CACJ,GAAM8B,CAAAA,UAAU,2FAAG,+IACLb,QADK,+CAEPX,CAAAA,KAAK,CAACyB,GAAN,CAAU,qBAAuBd,QAAjC,CAFO,qFAGPX,CAAAA,KAAK,CAACyB,GAAN,CAAU,sBAAwBT,IAAI,CAACU,GAAvC,CAHO,yCACXC,GADW,aAIjBC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,EACAP,QAAQ,CACNI,GAAG,CAACG,IAAJ,CAASC,IAAT,CAAc,SAACC,EAAD,CAAKC,EAAL,CAAY,CACxB,MAAO,IAAIC,CAAAA,IAAJ,CAASD,EAAE,CAACE,SAAZ,EAAyB,GAAID,CAAAA,IAAJ,CAASF,EAAE,CAACG,SAAZ,CAAhC,CACD,CAFD,CADM,CAAR,CALiB,uDAAH,kBAAVX,CAAAA,UAAU,2CAAhB,CAWAA,UAAU,GACX,CAdM,CAeP,CAACR,IAAI,CAACU,GAAN,CAfO,CAgBPJ,KAhBO,CAAT,CAmBA,mBACE,MAAC,SAAD,EAAW,SAAS,CAAED,OAAO,CAACjB,SAA9B,WACG,CAACO,QAAD,EAAcA,QAAQ,EAAIK,IAAI,CAACL,QAAjB,eAA6B,KAAC,UAAD,IAD9C,CAEGA,QAAQ,CAAG,EAAH,cAAQ,KAAC,UAAD,IAFnB,CAGGW,KAHH,SAGGA,KAHH,iBAGGA,KAAK,CAAEc,GAAP,CAAW,SAACC,CAAD,CAAO,CACjB,mBAAO,KAAC,IAAD,EAAkB,IAAI,CAAEA,CAAxB,EAAWA,CAAC,CAACX,GAAb,CAAP,CACD,CAFA,CAHH,GADF,CASD,CAED,cAAehB,CAAAA,IAAf","sourcesContent":["import { Container, makeStyles } from \"@material-ui/core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Post from \"../feed/Post\";\r\nimport UploadPost from \"../UploadPost\";\r\nimport axios from \"axios\";\r\nimport { listuserDetails } from \"../../../actions/productAction\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(10),\r\n    backgroundColor: theme.palette.grey[50],\r\n  },\r\n}));\r\n\r\nfunction Feed({ username }) {\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { loading, error, user } = userDetails;\r\n  const id = localStorage.getItem(\"userId\");\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(listuserDetails(id));\r\n  }, [id, dispatch]);\r\n  const classes = useStyles();\r\n  const [posts, setPosts] = useState();\r\n\r\n  useEffect(\r\n    () => {\r\n      const fetchPosts = async () => {\r\n        const res = username\r\n          ? await axios.get(\"/api/post/profile/\" + username)\r\n          : await axios.get(\"/api/post/timeline/\" + user._id);\r\n        console.log(res.data);\r\n        setPosts(\r\n          res.data.sort((p1, p2) => {\r\n            return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n          })\r\n        );\r\n      };\r\n      fetchPosts();\r\n    },\r\n    [user._id],\r\n    posts\r\n  );\r\n\r\n  return (\r\n    <Container className={classes.container}>\r\n      {!username || (username == user.username && <UploadPost />)}\r\n      {username ? \"\" : <UploadPost />}\r\n      {posts?.map((p) => {\r\n        return <Post key={p._id} post={p} />;\r\n      })}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Feed;\r\n"]},"metadata":{},"sourceType":"module"}