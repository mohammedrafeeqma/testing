{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mohammed rafeeque/Desktop/sample/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mohammed rafeeque\\\\Desktop\\\\sample\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Button,Card,makeStyles,Typography}from\"@material-ui/core\";import{Add,ImportantDevices,Remove}from\"@material-ui/icons\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router\";import{listuserDetails}from\"../../actions/productAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{rightBarTitle1:{margin:theme.spacing(3),marginBottom:\"20px\",fontSize:\"22px\",fontWeight:500},rightBarFriendList:{},rightbarInfo:{marginBottom:\"30px\"},rightbarInfoItem:{margin:theme.spacing(3),marginBottom:theme.spacing(1)},rightbarInfoKey:{fontWeight:500,marginRight:\"15px\",color:\"#555\"},rightbarInfoValue:{fontWeight:300},rightbarFollowings:{// marginTop:theme.spacing(5),\ndisplay:\"flex\",flexWrap:\"wrap\",// justifyContent: \"baseline\",\n// alignContent:'space-between',\nmarginLeft:theme.spacing(3)},rightbarFollowing:{display:\"flex\",flexDirection:\"column\",alignItems:'space-between',paddingBottom:\"0px\",cursor:\"pointer\",'&:hover':{cursor:'pointer'}},rightbarFollowingImg:{// width: \"100%\",\n// height: \"100px\",\nobjectFit:\"cover\",borderRadius:\"5px\",paddingRight:\"10px\",display:\"flex\",justifyContent:\"end\",marginRight:theme.spacing(1)},rightbarFollowingName:{alignItems:\"center\",fontSize:\"18px\",fontWeight:500,color:'black'},followButton:{backgroundColor:'#0D8E8E',color:'white',margin:theme.spacing(3)},follows:{marginTop:theme.spacing(2),display:'flex',// backgroundColor:'red',\nwidth:'43%',justifyContent:'space-between'},followers:{textAlign:'center'},followNum:{fontWeight:700,fontSize:'20px'},header:{display:'flex'}};});function ProfileRightBar(_ref){var _user$following,_profileUser$follower,_profileUser$followin;var profileUser=_ref.user;var dispatch=useDispatch();var id=localStorage.getItem(\"userId\");useEffect(function(){dispatch(listuserDetails(id));},[id,dispatch]);var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setFreinds=_useState2[1];var _useState3=useState((_user$following=user.following)===null||_user$following===void 0?void 0:_user$following.includes(profileUser===null||profileUser===void 0?void 0:profileUser._id)),_useState4=_slicedToArray(_useState3,2),followed=_useState4[0],setFollowed=_useState4[1];var sameFriend=friends.username===user.username;var navigate=useNavigate();useEffect(function(){var _user$following2;setFollowed((_user$following2=user.following)===null||_user$following2===void 0?void 0:_user$following2.includes(profileUser===null||profileUser===void 0?void 0:profileUser._id));});useEffect(function(){var getFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var friendList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/user/friends/\"+(profileUser===null||profileUser===void 0?void 0:profileUser._id));case 3:friendList=_context.sent;setFreinds(friendList.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getFriends(){return _ref2.apply(this,arguments);};}();getFriends();},[profileUser,followed]);var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _user$following3,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!followed){_context2.next=7;break;}_context2.next=4;return axios.put(\"/api/user/\".concat(profileUser._id,\"/unfollow\"),{userId:user._id});case 4:dispatch(listuserDetails(id));_context2.next=14;break;case 7:_context2.next=9;return axios.put(\"/api/user/\".concat(profileUser._id,\"/follow\"),{userId:user._id});case 9:_context2.next=11;return axios.post('/api/notification/',{userId:profileUser._id,friendName:user.username,img:user.profilePicture,action:'Follows you'});case 11:dispatch(listuserDetails(id));_context2.next=14;return axios.post('/api/conversation/',{senderId:user._id,recieverId:profileUser._id});case 14:setFollowed(!followed);_context2.next=22;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](0);response=_context2.t0.response;setFollowed((_user$following3=user.following)===null||_user$following3===void 0?void 0:_user$following3.includes(profileUser===null||profileUser===void 0?void 0:profileUser._id));console.log(response);case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[0,17]]);}));return function handleClick(){return _ref3.apply(this,arguments);};}();var classes=useStyles();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.header,children:[profileUser.username!==user.username&&/*#__PURE__*/_jsxs(Button,{className:classes.followButton,variant:\"contained\",onClick:handleClick,children:[followed?\"unfollow\":'follow',followed?/*#__PURE__*/_jsx(Remove,{}):/*#__PURE__*/_jsx(Add,{})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'20px'},className:classes.follows,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.followers,children:[/*#__PURE__*/_jsx(Typography,{className:classes.followNum,children:(_profileUser$follower=profileUser.followers)===null||_profileUser$follower===void 0?void 0:_profileUser$follower.length}),/*#__PURE__*/_jsx(Typography,{className:classes.followText,children:\"Followers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.followers,children:[/*#__PURE__*/_jsx(Typography,{className:classes.followNum,children:(_profileUser$followin=profileUser.following)===null||_profileUser$followin===void 0?void 0:_profileUser$followin.length}),/*#__PURE__*/_jsx(Typography,{className:classes.followText,children:\"Followings\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightBarTitle,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfoItem,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"span\",className:classes.rightbarInfoKey,children:[\"email:\",\" \"]}),/*#__PURE__*/_jsx(Typography,{variant:\"span\",className:classes.rightbarInfoValue,children:profileUser.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfoItem,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"span\",className:classes.rightbarInfoKey,children:[\"Gender:\",\" \"]}),/*#__PURE__*/_jsx(Typography,{variant:\"span\",className:classes.rightbarInfoValue,children:profileUser.gender})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfoItem,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"span\",className:classes.rightbarInfoKey,children:[\"Mobile:\",\" \"]}),/*#__PURE__*/_jsx(Typography,{variant:\"span\",className:classes.rightbarInfoValue,children:profileUser.mobile})]})]}),/*#__PURE__*/_jsx(Typography,{className:classes.rightBarTitle1,variant:\"h4\",children:\"Mutual Friends\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarFollowings,children:[console.log(friends),friends.map(function(friend){return friend.username!==user.username&&/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return navigate('/profile/'+friend.username);},className:classes.rightbarfollowing,children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"img\",{width:\"100\",height:\"100\",src:friend.profilePicture?friend.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png',className:classes.rightbarFollowingImg}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'10px',marginTop:'5px'},children:/*#__PURE__*/_jsx(Typography,{className:classes.rightbarFollowingName,variant:\"span\",children:friend.username})})]})},friend._id);})]})]})]});}export default ProfileRightBar;","map":{"version":3,"sources":["C:/Users/mohammed rafeeque/Desktop/sample/frontend/src/components/admin/ProfileRightBar.jsx"],"names":["Button","Card","makeStyles","Typography","Add","ImportantDevices","Remove","axios","useEffect","useState","useDispatch","useSelector","useNavigate","listuserDetails","useStyles","theme","rightBarTitle1","margin","spacing","marginBottom","fontSize","fontWeight","rightBarFriendList","rightbarInfo","rightbarInfoItem","rightbarInfoKey","marginRight","color","rightbarInfoValue","rightbarFollowings","display","flexWrap","marginLeft","rightbarFollowing","flexDirection","alignItems","paddingBottom","cursor","rightbarFollowingImg","objectFit","borderRadius","paddingRight","justifyContent","rightbarFollowingName","followButton","backgroundColor","follows","marginTop","width","followers","textAlign","followNum","header","ProfileRightBar","profileUser","user","dispatch","id","localStorage","getItem","userDetails","state","loading","error","friends","setFreinds","following","includes","_id","followed","setFollowed","sameFriend","username","navigate","getFriends","get","friendList","data","console","log","handleClick","put","userId","post","friendName","img","profilePicture","action","senderId","recieverId","response","classes","length","followText","rightBarTitle","email","gender","mobile","map","friend","rightbarfollowing"],"mappings":"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","sourcesContent":["import { Button, Card, makeStyles, Typography } from \"@material-ui/core\";\r\nimport { Add, ImportantDevices, Remove } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { listuserDetails } from \"../../actions/productAction\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rightBarTitle1: {\r\n    margin:theme.spacing(3),\r\n    marginBottom: \"20px\",\r\n    fontSize: \"22px\",\r\n    fontWeight: 500,\r\n  },\r\n  rightBarFriendList: {},\r\n  rightbarInfo: {\r\n    marginBottom: \"30px\",\r\n  },\r\n  rightbarInfoItem: {\r\n    margin: theme.spacing(3),\r\n    marginBottom: theme.spacing(1),\r\n    \r\n\r\n  },\r\n  rightbarInfoKey: {\r\n    fontWeight: 500,\r\n    marginRight: \"15px\",\r\n    color: \"#555\",\r\n  },\r\n  rightbarInfoValue: {\r\n    fontWeight: 300,\r\n  },\r\n  rightbarFollowings: {\r\n    // marginTop:theme.spacing(5),\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    // justifyContent: \"baseline\",\r\n    // alignContent:'space-between',\r\n    marginLeft:theme.spacing(3)\r\n\r\n\r\n  },\r\n  rightbarFollowing: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems:'space-between',\r\n    paddingBottom: \"0px\",\r\n    cursor: \"pointer\",\r\n    '&:hover':{\r\n      cursor:'pointer'\r\n    }\r\n    \r\n\r\n  },\r\n  rightbarFollowingImg: {\r\n    // width: \"100%\",\r\n    // height: \"100px\",\r\n    objectFit: \"cover\",\r\n    borderRadius: \"5px\",\r\n    paddingRight: \"10px\",\r\n    display: \"flex\",\r\n    justifyContent: \"end\",\r\n    marginRight:theme.spacing(1),\r\n    \r\n\r\n  },\r\n  rightbarFollowingName: {\r\n    alignItems: \"center\",\r\n    fontSize:\"18px\",\r\n    fontWeight:500,\r\n    color:'black'\r\n  },\r\n  followButton:{\r\n    backgroundColor:'#0D8E8E',\r\n    color:'white',\r\n    margin: theme.spacing(3)\r\n  },\r\n  follows:{\r\n    marginTop:theme.spacing(2),\r\n    display:'flex',\r\n    // backgroundColor:'red',\r\n    width:'43%',\r\n    justifyContent:'space-between'\r\n  },\r\n  followers:{\r\n    textAlign:'center'\r\n  },\r\n  followNum:{\r\n    fontWeight:700,\r\n    fontSize:'20px'\r\n  },\r\n  header:{\r\n    display:'flex'\r\n  },\r\n  \r\n}));\r\n\r\nfunction ProfileRightBar({ user: profileUser }) {\r\n  const dispatch = useDispatch();\r\n  const id = localStorage.getItem(\"userId\");\r\n\r\n  useEffect(() => {\r\n    dispatch(listuserDetails(id));\r\n  }, [id, dispatch]);\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { loading, error, user } = userDetails;\r\n  const [friends, setFreinds] = useState([]);\r\n  const [followed, setFollowed] = useState(user.following?.includes(profileUser?._id))\r\n  const sameFriend = friends.username === user.username\r\n  const navigate = useNavigate()\r\n\r\n\r\n  useEffect(() => {\r\n    setFollowed(user.following?.includes(profileUser?._id));\r\n  });\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const getFriends = async () => {\r\n      try {\r\n        const friendList = await axios.get(\"/api/user/friends/\" + profileUser?._id);\r\n        setFreinds(friendList.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    getFriends();\r\n  }, [profileUser,followed]);\r\n\r\n  const handleClick = async () => {\r\n    try {\r\n      if (followed) {\r\n        await axios.put(`/api/user/${profileUser._id}/unfollow`, {\r\n          userId: user._id,\r\n        });\r\n        dispatch(listuserDetails(id));\r\n      } else {\r\n        await axios.put(`/api/user/${profileUser._id}/follow`, {\r\n          userId: user._id,\r\n        });\r\n        await axios.post('/api/notification/',{\r\n          userId:profileUser._id,\r\n          friendName:user.username,\r\n          img:user.profilePicture,\r\n          action:'Follows you'\r\n        })\r\n        dispatch(listuserDetails(id));\r\n        await axios.post('/api/conversation/',{\r\n          senderId:user._id,\r\n          recieverId:profileUser._id\r\n        })\r\n      }\r\n      setFollowed(!followed)\r\n    \r\n    } catch ({ response }) {\r\n      setFollowed(user.following?.includes(profileUser?._id))\r\n      console.log(response);\r\n    }\r\n  };\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <div className={classes.header}>\r\n      {profileUser.username !== user.username && (\r\n\r\n        <Button className={classes.followButton} variant=\"contained\" onClick={handleClick}>\r\n          {followed ? \"unfollow\":'follow' }\r\n          {followed ? <Remove/> : <Add/>}\r\n          \r\n        </Button>\r\n      )}\r\n      <div style={{marginLeft:'20px'}} className={classes.follows}>\r\n          <div className={classes.followers}>\r\n          <Typography className={classes.followNum}>{profileUser.followers?.length}</Typography>\r\n          <Typography className={classes.followText}>Followers</Typography>\r\n          </div>\r\n          <div className={classes.followers}>\r\n          <Typography className={classes.followNum}>{profileUser.following?.length}</Typography>\r\n          <Typography className={classes.followText}>Followings</Typography>\r\n          </div>\r\n        </div>\r\n        </div>\r\n\r\n\r\n      <div className={classes.rightBarTitle}>\r\n        \r\n        <div className={classes.rightbarInfo}>\r\n          <div className={classes.rightbarInfoItem}>\r\n            <Typography variant=\"span\" className={classes.rightbarInfoKey}>\r\n              email:{\" \"}\r\n            </Typography>\r\n            <Typography variant=\"span\" className={classes.rightbarInfoValue}>\r\n              {profileUser.email}\r\n            </Typography>\r\n          </div>\r\n\r\n          <div className={classes.rightbarInfoItem}>\r\n            <Typography variant=\"span\" className={classes.rightbarInfoKey}>\r\n              Gender:{\" \"}\r\n            </Typography>\r\n            <Typography variant=\"span\" className={classes.rightbarInfoValue}>\r\n              {profileUser.gender}\r\n            </Typography>\r\n          </div>\r\n\r\n          <div className={classes.rightbarInfoItem}>\r\n            <Typography variant=\"span\" className={classes.rightbarInfoKey}>\r\n              Mobile:{\" \"}\r\n            </Typography>\r\n            <Typography variant=\"span\" className={classes.rightbarInfoValue}>\r\n              {profileUser.mobile}\r\n            </Typography>\r\n          </div>\r\n        </div>\r\n\r\n        <Typography className={classes.rightBarTitle1} variant=\"h4\">Mutual Friends</Typography>\r\n        <div className={classes.rightbarFollowings}>\r\n          {console.log(friends)}\r\n          {friends.map((friend) => (\r\n            \r\n            friend.username!==user.username &&\r\n            <div onClick={()=>navigate('/profile/'+friend.username)} key={friend._id} className={classes.rightbarfollowing}>\r\n              <div style={{marginBottom:'15px'}}>\r\n                <img width='100' height='100'\r\n                src={friend.profilePicture?friend.profilePicture:'https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png'}\r\n                className={classes.rightbarFollowingImg}\r\n              />\r\n              <div style={{marginLeft:'10px',marginTop:'5px'}}>\r\n              <Typography className={classes.rightbarFollowingName} variant=\"span\">{friend.username}</Typography>\r\n              </div>\r\n\r\n              </div>\r\n              \r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProfileRightBar;\r\n"]},"metadata":{},"sourceType":"module"}